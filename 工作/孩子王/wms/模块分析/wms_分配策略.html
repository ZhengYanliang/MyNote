<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAzUABAAAAAAFNgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABbAAAABwAAAAcZMzaOEdERUYAAAGIAAAAHQAAACAAOQAET1MvMgAAAagAAAA+AAAAYHqhde9jbWFwAAAB6AAAAFIAAAFa4azkLWN2dCAAAAI8AAAAKAAAACgFgwioZnBnbQAAAmQAAAGxAAACZVO0L6dnYXNwAAAEGAAAAAgAAAAIAAAAEGdseWYAAAQgAAAFDgAACMz7eroHaGVhZAAACTAAAAAwAAAANgWEOEloaGVhAAAJYAAAAB0AAAAkDGEGa2htdHgAAAmAAAAAEwAAADBEgAAQbG9jYQAACZQAAAAaAAAAGgsICJBtYXhwAAAJsAAAACAAAAAgASgBD25hbWUAAAnQAAACZwAABOD4no+3cG9zdAAADDgAAABsAAAAmF+yXM9wcmVwAAAMpAAAAC4AAAAusPIrFAAAAAEAAAAAyYlvMQAAAADLVHQgAAAAAM/u9uZ4nGNgZGBg4ANiCQYQYGJgBEJuIGYB8xgABMMAPgAAAHicY2Bm42OcwMDKwMLSw2LMwMDQBqGZihmiwHycoKCyqJjB4YPDh4NsDP+BfNb3DIuAFCOSEgUGRgAKDgt4AAB4nGNgYGBmgGAZBkYGEAgB8hjBfBYGCyDNxcDBwMTA9MHhQ9SHrA8H//9nYACyQyFs/sP86/kX8HtB9UIBIxsDXICRCUgwMaACRoZhDwA3fxKSAAAAAAHyAHABJQB/AIEAdAFGAOsBIwC/ALgAxACGAGYAugBNACcA/wCIeJxdUbtOW0EQ3Q0PA4HE2CA52hSzmZDGe6EFCcTVjWJkO4XlCGk3cpGLcQEfQIFEDdqvGaChpEibBiEXSHxCPiESM2uIojQ7O7NzzpkzS8qRqnfpa89T5ySQwt0GzTb9Tki1swD3pOvrjYy0gwdabGb0ynX7/gsGm9GUO2oA5T1vKQ8ZTTuBWrSn/tH8Cob7/B/zOxi0NNP01DoJ6SEE5ptxS4PvGc26yw/6gtXhYjAwpJim4i4/plL+tzTnasuwtZHRvIMzEfnJNEBTa20Emv7UIdXzcRRLkMumsTaYmLL+JBPBhcl0VVO1zPjawV2ys+hggyrNgQfYw1Z5DB4ODyYU0rckyiwNEfZiq8QIEZMcCjnl3Mn+pED5SBLGvElKO+OGtQbGkdfAoDZPs/88m01tbx3C+FkcwXe/GUs6+MiG2hgRYjtiKYAJREJGVfmGGs+9LAbkUvvPQJSA5fGPf50ItO7YRDyXtXUOMVYIen7b3PLLirtWuc6LQndvqmqo0inN+17OvscDnh4Lw0FjwZvP+/5Kgfo8LK40aA4EQ3o3ev+iteqIq7wXPrIn07+xWgAAAAABAAH//wAPeJyFlctvG1UUh+/12DPN1B7P3JnYjj2Ox4/MuDHxJH5N3UdaEUQLqBIkfQQioJWQ6AMEQkIqsPGCPwA1otuWSmTBhjtps2ADWbJg3EpIXbGouqSbCraJw7kzNo2dRN1cnXN1ZvT7zuuiMEI7ncizyA0URofRBJpCdbQuIFShYY+GZRrxMDVtih5TwQPHtXDFFSIKoWIbuREBjLH27Ny4MsbVx+uOJThavebgVrNRLAiYx06rXsvhxLgWx9xpfHdrs/ekc2Pl2cpPCVEITQpwbj8VQhfXSq2m+Wxqaq2D73Kne5e3NjHqQNj3CRYlJlgUl/jRNP+2Gs2pNYRQiOnmUaQDqm30KqKiTTWPWjboxnTWpvgxjXo0KrtZXAHt7hwIz0YVcj88JnKlJKi3NPAwLyDwZudSmJSMMJFDYaOkaol6XtESx3Gt1VTytdZJ3DCLeaVhVnCBH1fycHTxFXwPX+l2e3d6H/TufGGmMTLTnbSJUdo00zuBswMO/nl3YLeL/wnu9/limCuD3vC54h5NBVz6Li414AI8Vx3iiosKcQXUbrvhFFiYb++HN4DaF4XzFW0fIN4XDWJ3a3XQoq9V8WiyRmdsatV9xUcHims1JloH0YUa090G3Tro3mC6c01f+YwCPquINr1PTaCP6rVTOOmf0GE2dBc7zWIhji3/5MchSuBHgDbU99RMWt3YUNMZMJmx92YP6NsHx/5/M1yvInpnkIOM3Z8fA3JQ2lW1RFC1KaBPDFXNAHYYvGy73aYZZZ3HifbeuiVZCpwA3oQBs0wGPYJbJfg60xrKEbKiNtTe1adwrpBRwlAuQ3q3VRaX0QmQ9a49BTSCuF1MLfQ6+tinOubRBZuWPNoMevGMT+V41KitO1is3D/tpMcq1JHZqDHGs8DoYGDkxJgKjHROeTCmhZvzPm9pod+ltKm4PN7Dyvvldlpsg8D+4AUJZ3F/JBstZz7cbFRxsaAGV6yX/dkcycWf8eS3QlQea+YLjdm3yrOnrhFpUyKVvFE4lpv4bO3Svx/6F/4xmiDu/RT5iI++lko18mY1oX+5UGKR6kmVjM/Zb76yfHtxy+h/SyQ0lLdpdKy/lWB6szatetQJ8nZ80A2Qt6ift6gJeavU3BO4gtxs/KCtNPVibCtYCWY3SIlSBPKXZALXiIR9oZeJ1AuMyxLpHIy/yO7vSiSE+kZvk0ihJ30HgHfzZtEMmvV58x6dtqns0XTAW7Vdm4HJ04OCp/crOO7rd9SGxQAE/mVA9xRN+kVSMRFF6S9JFGUtthkjBA5tFCWc2l4V43Ex9GmUP3SI37Jjmir9KqlaDJ4S4JB3vuM/jzyH1+8MuoZ+QGzfnvPoJb96cZlWjMcKLfgDwB7E634JTY+asjsPzS5CiVnEWY+KsrsIN5rn3mAPjqmQBxGjcGKB9f9ZxY3mYC2L85CJ2FXIxKKyHk+dg0FHbuEc7D5NzWUX32WxFcWNGRAbvwSx0RmIXVDuYySafluQBmzA/ssqJAMLnli+WIC90Gw4lm85wcp0qjArEDPJJV/sSx4P9ungTpgMw5gVC1XO4uULq0s3v1rqLi0vX/z65vlH50f8T/RHmSPTk5xxWBWOluMT6WiOy+tdvWxlV/XQb3o3c6Ssr+r6I708GsX9/nzp1tKFh0s3v7m4vAy/Hnb/KMOvc1wump6Il48K6mGDy02X9Yd65pa+nQIjk76lWxCkG8NBCP0HQS9IpAAAeJxjYGRgYGBhcCrq214Qz2/zlUGenQEEzr/77oug/zewFbB+AHI5GJhAogBwKQ0qeJxjYGRgYH3/P46BgZ0BBNgKGBgZUAEPAE/7At0AAAB4nGNngAB2IGYjhBsYBAAIYADVAAAAAAAAAAAAAFwAyAEeAaACCgKmAx4DggRmAAAAAQAAAAwAagAEAAAAAAACAAEAAgAWAAABAAChAAAAAHiclZI7bxQxFIWPd/JkUYQChEhIyAVKgdBMskm1QkKrRETpQiLRUczueB/K7HhlOxttg8LvoKPgP9DxFxANDR0tHRWi4NjrPIBEgh1p/dm+vufcawNYFWsQmP6e4jSyQB2fI9cwj++RE9wTjyPP4LYoI89iWbyLPIe6+Bh5Hs9rryMv4GbtW+RF3EhuRa7jbrIbeQkPkjdUETOLnL0Kip4FVvAhco1RXyMnSPEz8gzWxE7kWTwUp5HnsCLeR57HW/El8gJWa58iL+JO7UfkOh4l9yMv4UnyEtvQGGECgwF66MNBooF1bGCL1ELB/TYU+ZBRlvsKQ44Se6jQ4a7hef+fh72Crv25kp+8lNWGmeKoOI5jJLb1aGIGvb6TjfWNLdkqdFvJw4l1amjlXtXRZqRN7lSRylZZyhBqpVFWmTEXgWfUrpi/hZOQXdOd4rKuXOtEWT3k5IArPRzTUU5tHKjecZkTpnVbNOnt6jzN8240GD4xtikvZW56043rPMg/dS+dlOceXoR+WPbJ55Dsekq1lJpnypsMUsYOdCW30o103Ytu/lvh+5RWFLfBjm9/N8hJntPhvx92rnoE/kyHdGasGy754kw36vsVf/lFeBi+0COu+cfgQr42G3CRpeLoZ53gmfe3X6rcKt5oVxnptHR9JS8ehVUd5wvvahN2uqxOOpMXapibI5k7Zwbt4xBSaTfoKBufhAnO/uqNcfK8OTs0OQ6l7JIqFjDhYj5WcjevCnI/1DDiI8j4ndWb/5YzDZWh79yomWXeXj7Nnw70/2TIeFPTrlSh89k1ObOSRVZWZfgF0r/zJQB4nG2JUQuCQBCEd07TTg36fb2IyBaLd3vWaUh/vmSJnvpgmG8YcmS8X3Shf3R7QA4OBUocUKHGER5NNbOOEvwc1txnuWkTRb/aPjimJ5vXabI+3VfOiyS15UWvyezM2xiGOPyuMohOH8O8JiO4Af+FsAGNAEuwCFBYsQEBjlmxRgYrWCGwEFlLsBRSWCGwgFkdsAYrXFhZsBQrAAA=) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAYcAA0AAAAACjQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABMAAAABwAAAAca8vGTk9TLzIAAAFMAAAARAAAAFZG1VHVY21hcAAAAZAAAAA+AAABQgAP9AdjdnQgAAAB0AAAAAQAAAAEACICiGdhc3AAAAHUAAAACAAAAAj//wADZ2x5ZgAAAdwAAADRAAABEKyikaNoZWFkAAACsAAAAC0AAAA2AtXoA2hoZWEAAALgAAAAHAAAACQHngNFaG10eAAAAvwAAAAQAAAAEAwAACJsb2NhAAADDAAAAAoAAAAKALIAVG1heHAAAAMYAAAAHwAAACABEAB2bmFtZQAAAzgAAALBAAAFu3I9x/Nwb3N0AAAF/AAAAB0AAAAvaoFvbwAAAAEAAAAAzBdyYwAAAADP2IQvAAAAAM/bz7t4nGNgZGFgnMDAysDB1Ml0hoGBoR9CM75mMGLkYGBgYmBlZsAKAtJcUxgcPsR8iGF2+O/AEMPsznAYKMwIkgMA5REMOXicY2BgYGaAYBkGRgYQsAHyGMF8FgYFIM0ChED+h5j//yEk/3KoSgZGNgYYk4GRCUgwMaACRoZhDwCs7QgGAAAAIgKIAAAAAf//AAJ4nHWMMQrCQBBF/0zWrCCIKUQsTDCL2EXMohYGSSmorScInsRGL2DOYJe0Ntp7BK+gJ1BxF1stZvjz/v8DRghQzEc4kIgKwiAppcA9LtzKLSkdNhKFY3HF4lK69ExKslx7Xa+vPRVS43G98vG1DnkDMIBUgFN0MDXflU8tbaZOUkXUH0+U27RoRpOIyCKjbMCVejwypzJJG4jIwb43rfl6wbwanocrJm9XFYfskuVC5K/TPyczNU7b84CXcbxks1Un6H6tLH9vf2LRnn8Ax7A5WQAAAHicY2BkYGAA4teL1+yI57f5ysDNwgAC529f0kOmWRiYVgEpDgYmEA8AUzEKsQAAAHicY2BkYGB2+O/AEMPCAAJAkpEBFbAAADgKAe0EAAAiAAAAAAQAAAAEAAAAAAAAKgAqACoAiAAAeJxjYGRgYGBhsGFgYgABEMkFhAwM/xn0QAIAD6YBhwB4nI1Ty07cMBS9QwKlQapQW3VXySvEqDCZGbGaHULiIQ1FKgjWMxknMfLEke2A+IJu+wntrt/QbVf9gG75jK577Lg8K1qQPCfnnnt8fX1NRC/pmjrk/zprC+8D7tBy9DHgBXoWfQ44Av8t4Bj4Z8CLtBL9CniJluPXASf0Lm4CXqFX8Q84dOLnMB17N4c7tBo1AS/Qi+hTwBH4rwHHwN8DXqQ30XXAS7QaLwSc0Gn8NuAVWou/gFmnjLrEaEh9GmDdDGgL3B4JsrRPDU2hTOiMSuJUIdKQQayiAth69r6akSSFqIJuA19TrzCIaY8sIoxyrNIrL//pw7A2iMygkX5vDj+G+kuoLdX4GlGK/8Lnlz6/h9MpmoO9rafrz7ILXEHHaAx95s9lsI7AHNMBWEZHULnfAXwG9/ZqdzLI08iuwRloXE8kfhXYAvE23+23DU3t626rbs8/8adv+9DWknsHp3E17oCf+Z48rvEQNZ78paYM38qfk3v/u3l3u3GXN2Dmvmvpf1Srwk3pB/VSsp512bA/GG5i2WJ7wu430yQ5K3nFGiOqgtmSB5pJVSizwaacmUZzZhXLlZTq8qGGFY2YcSkqbth6aW1tRmlaCFs2016m5qn36SbJrqosG4uMV4aP2PHBmB3tjtmgN2izkGQyLWprekbIntJFing32a5rKWCN/SdSoga45EJykyQ7asZvHQ8PTm6cslIpwyeyjbVltNikc2HTR7YKh9LBl9DADC0U/jLcBZDKrMhUBfQBvXRzLtFtjU9eNHKin0x5InTqb8lNpfKv1s1xHzTXRqgKzek/mb7nB8RZTCDhGEX3kK/8Q75AmUM/eLkfA+0Hi908Kx4eNsMgudg5GLdRD7a84npi+YxNr5i5KIbW5izXas7cHXIMAau1OueZhfj+cOcP3P8MNIWLyYOBuxL6DRylJ4cAAAB4nGNgYoAALjDJyIAOWMCiTIxMLDmZedkABtIBygAAAA==) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>wms_分配策略</title></head><body><article class="markdown-body"><div class="toc">
<ul>
<li><a href="#wmsconstants">常量(WmsConstants)</a></li>
<li><a href="#beanmstallocationstrategy">bean(MstAllocationStrategy)</a></li>
<li><a href="#mstallocationstrategydao">接口(MstAllocationStrategyDao)</a></li>
<li><a href="#mstallocationstrategydaoimpl">实现类(MstAllocationStrategyDaoImpl)</a></li>
<li><a href="#mappermstallocationstrategymapper">mapper文件(MstAllocationStrategyMapper)</a></li>
<li><a href="#testmstallocationstrategydao">测试用例(TestMstAllocationStrategyDao)</a></li>
<li><a href="#masterdataservice">接口(MasterDataService)</a></li>
<li><a href="#masterdataserviceimpl">实现类(MasterDataServiceImpl)</a></li>
<li><a href="#testmasterdataservice">测试用例(TestMasterDataService)</a></li>
<li><a href="#log4jproperties">log4j.properties</a></li>
<li><a href="#mappermstallocationstrategymapper_1">mapper文件(MstAllocationStrategyMapper)</a></li>
<li><a href="#rulesys-operate-log-rule">rule(sys-operate-log-rule)</a></li>
<li><a href="#allocationstrategybusinessservice">接口（AllocationStrategyBusinessService）</a></li>
<li><a href="#allocationstrategybusinessserviceimpl">实现类（AllocationStrategyBusinessServiceImpl）</a></li>
<li><a href="#controllermstallocationstrategycontroller">Controller(MstAllocationStrategyController)</a></li>
<li><a href="#allocation-strategy-add-controllerjs">allocation-strategy-add-controller.js</a></li>
<li><a href="#allocation-strategy-controllerjs">allocation-strategy-controller.js</a></li>
<li><a href="#allocation-strategy-detail-add-controllerjs">allocation-strategy-detail-add-controller.js</a></li>
<li><a href="#allocation-strategy-detail-edit-controllerjs">allocation-strategy-detail-edit-controller.js</a></li>
<li><a href="#allocation-strategy-edit-controllerjs">allocation-strategy-edit-controller.js</a></li>
<li><a href="#allocation-strategy-servicejs">allocation-strategy-service.js</a></li>
<li><a href="#allocation-strategyhtml">allocation-strategy.html</a></li>
<li><a href="#allocation-strategy-addhtml">allocation-strategy-add.html</a></li>
<li><a href="#allocation-strategy-detail-addhtml">allocation-strategy-detail-add.html</a></li>
<li><a href="#allocation-strategy-detail-edithtml">allocation-strategy-detail-edit.html</a></li>
<li><a href="#allocation-strategy-edithtml">allocation-strategy-edit.html</a></li>
</ul>
</div>
<h2 id="wmsconstants"><a name="user-content-wmsconstants" href="#wmsconstants" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>常量(WmsConstants)</h2>
<pre><code>/wms-common/src/main/java/com/haiziwang/kwms/common/domain/constant/WmsConstants.java

  /**
     * mst_wh_sku 表的数据落地时带上的默认分配策略名称
     */
     public   static   final  String DEFAULT_ALLOCATION_STRATEGY =  &quot;标准分配策略&quot; ;
</code></pre>

<h2 id="beanmstallocationstrategy"><a name="user-content-beanmstallocationstrategy" href="#beanmstallocationstrategy" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>bean(MstAllocationStrategy)</h2>
<pre><code>/wms-interface-common/src/main/java/com/haiziwang/kwms/common/domain/bean/MstAllocationStrategy.java

package  com.haiziwang.kwms.common.domain.bean;
import  java.io.Serializable;
import  java.util.Date;
public   class  MstAllocationStrategy  implements  Serializable {
     /**
     * 内部主键
     */
     private  Long sysNo;
     /**
     * 定位策略编码
     */
     private  String allocationStrategyNo;
     /**
     * 描述
     */
     private  String allocationStrategyDesc;
     /**
     * 仓库内部主键
     */
     private  String whSysNo;
     /**
     * 仓库编码
     */
     private  String whNo;
     /**
     * 仓库名称
     */
     private  String whName;
     /**
     * 货主内部主键
     */
     private  String companySysNo;
     /**
     * 货主编码
     */
     private  String companyCode;
     /**
     * 货主名称
     */
     private  String companyName;
     /**
     * 备注
     */
     private  String comments;
     /**
     * 是否有效：1是 0否
     */
     private  Integer yn;
     /**
     * 时间戳
     */
     private  Date ts;
     /**
     * 创建时间
     */
     private  Date createTime;
     private  Date updateTime;
     /**
     * 创建人
     */
     private  String createPin;
     private  String updatePin;
     private  Integer start;
     private  Integer rows;
     private   static   final   long  serialVersionUID = 1L;
     public  Long getSysNo() {
         return  sysNo;
    }
     public   void  setSysNo(Long sysNo) {
         this .sysNo = sysNo;
    }
     public  String getAllocationStrategyNo() {
         return  allocationStrategyNo;
    }
     public   void  setAllocationStrategyNo(String allocationStrategyNo) {
         this .allocationStrategyNo = allocationStrategyNo;
    }
     public  String getAllocationStrategyDesc() {
         return  allocationStrategyDesc;
    }
     public   void  setAllocationStrategyDesc(String allocationStrategyDesc) {
         this .allocationStrategyDesc = allocationStrategyDesc;
    }
     public  Integer getYn() {
         return  yn;
    }
     public   void  setYn(Integer yn) {
         this .yn = yn;
    }
     public  String getWhNo() {
         return  whNo;
    }
     public   void  setWhNo(String whNo) {
         this .whNo = whNo;
    }
     public  String getWhName() {
         return  whName;
    }
     public   void  setWhName(String whName) {
         this .whName = whName;
    }
     public  String getCompanyCode() {
         return  companyCode;
    }
     public   void  setCompanyCode(String companyCode) {
         this .companyCode = companyCode;
    }
     public  String getCompanyName() {
         return  companyName;
    }
     public   void  setCompanyName(String companyName) {
         this .companyName = companyName;
    }
     public  String getComments() {
         return  comments;
    }
     public   void  setComments(String comments) {
         this .comments = comments;
    }
     public  String getWhSysNo() {
         return  whSysNo;
    }
     public   void  setWhSysNo(String whSysNo) {
         this .whSysNo = whSysNo;
    }
     public  String getCompanySysNo() {
         return  companySysNo;
    }
     public   void  setCompanySysNo(String companySysNo) {
         this .companySysNo = companySysNo;
    }
     public  Date getUpdateTime() {
         return  updateTime;
    }
     public   void  setUpdateTime(Date updateTime) {
         this .updateTime = updateTime;
    }
     public  String getCreatePin() {
         return  createPin;
    }
     public   void  setCreatePin(String createPin) {
         this .createPin = createPin;
    }
     public  String getUpdatePin() {
         return  updatePin;
    }
     public   void  setUpdatePin(String updatePin) {
         this .updatePin = updatePin;
    }
     public  Date getTs() {
         return  ts;
    }
     public   void  setTs(Date ts) {
         this .ts = ts;
    }
     public  Date getCreateTime() {
         return  createTime;
    }
     public   void  setCreateTime(Date createTime) {
         this .createTime = createTime;
    }
     public  Integer getStart() {
         return  start;
    }
     public   void  setStart(Integer start) {
         this .start = start;
    }
     public  Integer getRows() {
         return  rows;
    }
     public   void  setRows(Integer rows) {
         this .rows = rows;
    }
}


</code></pre>

<h2 id="mstallocationstrategydao"><a name="user-content-mstallocationstrategydao" href="#mstallocationstrategydao" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>接口(MstAllocationStrategyDao)</h2>
<pre><code>/wms-interface-dao/src/main/java/com/haiziwang/kwms/downlink/dao/MstAllocationStrategyDao.java

package  com.haiziwang.kwms.downlink.dao;
import  com.haiziwang.kwms.common.dao.base.BaseDao;
import  com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy;
/**
 * Copyright: 2016 Haiziwang
 * *
 * Author:  Daniel Kong
 * Date:    2016 - 10 - 21
 * Desc:    分配策略 基础数据的 增删改查 服务
 */
public   interface  MstAllocationStrategyDao  extends  BaseDao&lt;MstAllocationStrategy, Long&gt; {
     /**
     * 根据策略编号或策略描述查询单条策略
     *
     *  @param  mstAllocationStrategy 查询条件
     *  @return  符合条件的分配策略
     */
    MstAllocationStrategy selectStrategy(MstAllocationStrategy mstAllocationStrategy);
}
</code></pre>

<h2 id="mstallocationstrategydaoimpl"><a name="user-content-mstallocationstrategydaoimpl" href="#mstallocationstrategydaoimpl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>实现类(MstAllocationStrategyDaoImpl)</h2>
<pre><code>/wms-interface-dao/src/main/java/com/haiziwang/kwms/downlink/dao/impl/MstAllocationStrategyDaoImpl.java

package  com.haiziwang.kwms.downlink.dao.impl;
import  com.haiziwang.kwms.common.dao.base.BaseDaoSupport;
import  com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy;
import  com.haiziwang.kwms.downlink.dao.MstAllocationStrategyDao;
import  org.springframework.stereotype.Repository;
/**
 * Copyright: 2016 Haiziwang
 * *
 * Author:  Daniel Kong
 * Date:    2016 - 10 - 21
 * Desc:    分配策略 基础数据的 增删改查 服务
 */
@ Repository( &quot;mstAllocationStrategyDao&quot; )
public   class  MstAllocationStrategyDaoImpl  extends  BaseDaoSupport&lt;MstAllocationStrategy, Long&gt;  implements  MstAllocationStrategyDao {
     private   static   final  String NAMESPACE =  &quot;mybatis.mapper.MstAllocationStrategyMapper&quot; ;
     protected  MstAllocationStrategyDaoImpl() {
         super (NAMESPACE);
    }
     /**
     * 根据策略编号或策略描述查询单条策略
     *
     *  @param  mstAllocationStrategy 查询条件
     *  @return  符合条件的分配策略
     */
     @ Override
     public  MstAllocationStrategy selectStrategy(MstAllocationStrategy mstAllocationStrategy) {
         return   this .getMySqlSessionTemplate().selectOne(NAMESPACE +  &quot;.selectStrategy&quot; , mstAllocationStrategy);
    }
}
</code></pre>

<h2 id="mappermstallocationstrategymapper"><a name="user-content-mappermstallocationstrategymapper" href="#mappermstallocationstrategymapper" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>mapper文件(MstAllocationStrategyMapper)</h2>
<pre><code>/wms-interface-dao/src/main/resources/mybatis.mapper/MstAllocationStrategyMapper.xml

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;
&lt;mapper namespace=&quot;mybatis.mapper.MstAllocationStrategyMapper&quot;&gt;
    &lt;resultMap id=&quot;BaseResultMap&quot; type=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot;&gt;
        &lt;id column=&quot;sys_no&quot; property=&quot;sysNo&quot; jdbcType=&quot;BIGINT&quot;/&gt;
        &lt;result column=&quot;allocation_strategy_no&quot; property=&quot;allocationStrategyNo&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;allocation_strategy_desc&quot; property=&quot;allocationStrategyDesc&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;wh_sys_no&quot; property=&quot;whSysNo&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;wh_no&quot; property=&quot;whNo&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;wh_name&quot; property=&quot;whName&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;company_sys_no&quot; property=&quot;companySysNo&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;company_code&quot; property=&quot;companyCode&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;company_name&quot; property=&quot;companyName&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;comments&quot; property=&quot;comments&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;yn&quot; property=&quot;yn&quot; jdbcType=&quot;INTEGER&quot;/&gt;
        &lt;result column=&quot;ts&quot; property=&quot;ts&quot; jdbcType=&quot;TIMESTAMP&quot;/&gt;
        &lt;result column=&quot;create_time&quot; property=&quot;createTime&quot; jdbcType=&quot;TIMESTAMP&quot;/&gt;
        &lt;result column=&quot;create_pin&quot; property=&quot;createPin&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;update_pin&quot; property=&quot;updatePin&quot; jdbcType=&quot;VARCHAR&quot;/&gt;
        &lt;result column=&quot;update_time&quot; property=&quot;updateTime&quot; jdbcType=&quot;TIMESTAMP&quot;/&gt;
    &lt;/resultMap&gt;
    &lt;sql id=&quot;Base_Column_List&quot;&gt;
    sys_no, allocation_strategy_no, allocation_strategy_desc, wh_sys_no, wh_no, wh_name, company_sys_no,
    company_code, company_name, comments, yn, ts, create_time, create_pin, update_pin,update_time
    &lt;/sql&gt;
    &lt;!--根据策略编号或策略描述查询单条策略--&gt;
    &lt;select id=&quot;selectStrategy&quot; resultMap=&quot;BaseResultMap&quot;
            parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot;&gt;
        SELECT
        &lt;include refid=&quot;Base_Column_List&quot;/&gt;
        FROM mst_allocation_strategy
        &lt;where&gt;
            &lt;if test=&quot;allocationStrategyNo != null and allocationStrategyNo != ''&quot;&gt;
                AND allocation_strategy_no=#{allocationStrategyNo}
            &lt;/if&gt;
            &lt;if test=&quot;allocationStrategyDesc != null and allocationStrategyDesc != ''&quot;&gt;
                AND allocation_strategy_desc=#{allocationStrategyDesc}
            &lt;/if&gt;
            AND yn = 1
        &lt;/where&gt;
    &lt;/select&gt; &lt;/mapper&gt;   

</code></pre>

<h2 id="testmstallocationstrategydao"><a name="user-content-testmstallocationstrategydao" href="#testmstallocationstrategydao" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>测试用例(TestMstAllocationStrategyDao)</h2>
<pre><code>/wms-interface-dao/src/test/java/com/haiziwang/kwms/downlink/dao/TestMstAllocationStrategyDao.java

package  com.haiziwang.kwms.downlink.dao;
import  com.alibaba.fastjson.JSON;
import  com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy;
import  com.haiziwang.kwms.common.domain.constant.WmsConstants;
import  org.junit.Test;
import  org.junit.runner.RunWith;
import  org.slf4j.Logger;
import  org.slf4j.LoggerFactory;
import  org.springframework.beans.factory.annotation.Autowired;
import  org.springframework.test.context.ContextConfiguration;
import  org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
/**
 * Copyright: 2016 Haiziwang
 * *
 * Author:  Daniel Kong
 * Date:    2016 - 10 - 21
 * Desc:    MstAllocationStrategyDao 的测试用例
 */
@ ContextConfiguration(locations = { &quot;classpath:/config/test-spring-outbound-config.xml&quot; })
@ RunWith(SpringJUnit4ClassRunner. class )
public   class  TestMstAllocationStrategyDao {
     private   static   final  Logger logger = LoggerFactory.getLogger(TestMstAllocationStrategyDao. class );
     @ Autowired
     private  MstAllocationStrategyDao mstAllocationStrategyDao;
     @ Test
     public   void  testSelectStrategy()  throws  Exception {
        MstAllocationStrategy queryStrategy =  new  MstAllocationStrategy();
        queryStrategy.setAllocationStrategyDesc(WmsConstants.DEFAULT_ALLOCATION_STRATEGY);
        MstAllocationStrategy strategy = mstAllocationStrategyDao.selectStrategy(queryStrategy);
        logger.info(JSON.toJSONString(strategy));
    }
}
</code></pre>

<h2 id="masterdataservice"><a name="user-content-masterdataservice" href="#masterdataservice" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>接口(MasterDataService)</h2>
<pre><code>/wms-interface-service/src/main/java/com/haiziwang/kwms/downlink/service/MasterDataService.java

package  com.haiziwang.kwms.downlink.service;
import  com.haiziwang.kwms.common.domain.bean.*;
import  com.haiziwang.kwms.common.domain.enums.SequenceEnum;
/**
 * Copyright: 2016 Haiziwang
 * *
 * Author:  Daniel Kong
 * Date:    2016 - 05 - 24
 * Desc:    为订单下发提供基础数据查询支持 (缓存优先)
 */
public   interface  MasterDataService {
     /**
     * 根据仓库编码从缓存或者数据库中获取仓库信息
     *
     *  @param  whNo 仓库编码
     *  @return  仓库信息
     */
    MstWh getMstWhFromNo(String whNo);

     /**
     * 获取 &quot;标准分配策略&quot;
     */
    MstAllocationStrategy selectStandardAllocStrategy();

}
</code></pre>

<h2 id="masterdataserviceimpl"><a name="user-content-masterdataserviceimpl" href="#masterdataserviceimpl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>实现类(MasterDataServiceImpl)</h2>
<pre><code>/wms-interface-service/src/main/java/com/haiziwang/kwms/downlink/service/impl/MasterDataServiceImpl.java

package  com.haiziwang.kwms.downlink.service.impl;
import  com.haiziwang.kwms.common.domain.bean.*;
import  com.haiziwang.kwms.common.domain.constant.StringConstants;
import  com.haiziwang.kwms.common.domain.constant.WmsConstants;
import  com.haiziwang.kwms.common.domain.enums.SequenceEnum;
import  com.haiziwang.kwms.common.domain.enums.WMS3ExceptionCode;
import  com.haiziwang.kwms.common.domain.util.StringUtils;
import  com.haiziwang.kwms.downlink.dao.*;
import  com.haiziwang.kwms.downlink.service.MasterDataService;
import  com.haiziwang.kwms.downlink.service.MstSequenceService;
import  com.haiziwang.kwms.platform.service.KMemService;
import  org.slf4j.Logger;
import  org.slf4j.LoggerFactory;
import  org.springframework.beans.factory.annotation.Autowired;
import  org.springframework.stereotype.Service;
/**
 * Copyright: 2016 Haiziwang
 * *
 * Author:  Daniel Kong
 * Date:    2016 - 05 - 24
 */
@ Service( &quot;masterDataService&quot; )
public   class  MasterDataServiceImpl  implements  MasterDataService {
     private   static   final  Logger logger = LoggerFactory.getLogger(MasterDataServiceImpl. class );
     private   static   final  String REDIS_KEY_WH_MAP =  &quot;MasterData_Wh_&quot; ;
     private   static   final  String REDIS_KEY_VENDOR_MAP =  &quot;MasterData_Vendor_&quot; ;
     private   static   final  String REDIS_KEY_CARRIER_MAP =  &quot;MasterData_Carrier_&quot; ;
     private   static   final  String REDIS_KEY_SHOP_MAP =  &quot;MasterData_Shop_&quot; ;
     private   static   final  String REDIS_KEY_SKU_MAP =  &quot;MasterData_Sku_&quot; ;
     private   static   final  String REDIS_KEY_ADDRESS_MAP =  &quot;MasterData_Address_&quot; ;
     private   static   final  String REDIS_KEY_ALLOCATION_STRATEGY =  &quot;MasterData_Standard_AllocStrategy&quot; ;
     private   static   final  String REDIS_KEY_PUTAWAY_STRATEGY =  &quot;MasterData_Standard_PutawayStrategy&quot; ;
     @ Autowired
     private  MstWhDao mstWhDao;
     @ Autowired
     private  MstVendorDao mstVendorDao;
     @ Autowired
     private  MstCarrierDao mstCarrierDao;
     @ Autowired
     private  MstSkuDao mstSkuDao;
     @ Autowired
     private  MstAddressDao mstAddressDao;
     @ Autowired
     private  MstShopDao mstShopDao;
     @ Autowired
     private  MstAllocationStrategyDao mstAllocationStrategyDao;
     @ Autowired
     private  MstPutawayStrategyDao mstPutawayStrategyDao;
     @ Autowired
     private  MstSequenceService mstSequenceService;
     @ Autowired
     private  KMemService kMemService;
     /**
     * 根据仓库编码从缓存或者数据库中获取仓库信息
     *
     *  @param  whNo 仓库编码
     *  @return  仓库信息
     */
     @ Override
     public  MstWh getMstWhFromNo(String whNo) {
        MstWh mstWh =  null ;
         boolean  isInCache =  true ;
        mstWh = kMemService.readObject(REDIS_KEY_WH_MAP + whNo, MstWh. class );
         if  (mstWh ==  null ) {
             //如果缓存没有该仓库信息，从数据库读取
            isInCache =  false ;
            mstWh = mstWhDao.selectByWhNo(whNo);
        }
         if  (mstWh ==  null  || mstWh.getSysNo() ==  null ) {
            logger.error(WMS3ExceptionCode.ORDER_DOWN_WH_NOT_EXIST.getDesout());
             throw   new  RuntimeException(WMS3ExceptionCode.getExceptionMsg(WMS3ExceptionCode.ORDER_DOWN_WH_NOT_EXIST));
        }
         if  (!isInCache)
            kMemService.writeObject(REDIS_KEY_WH_MAP + whNo, mstWh);
         return  mstWh;
    }

     /**
     * 获取 &quot;标准分配策略&quot;
     */
     @ Override
     public  MstAllocationStrategy selectStandardAllocStrategy() {
        MstAllocationStrategy retVal =  null ;
         boolean  isInCache =  true ;
        retVal = kMemService.readObject(REDIS_KEY_ALLOCATION_STRATEGY, MstAllocationStrategy. class );
         if  (retVal ==  null  || retVal.getSysNo() ==  null ) {
             //如果缓存没有该信息，从数据库读取
            isInCache =  false ;
            MstAllocationStrategy queryStrategy =  new  MstAllocationStrategy();
            queryStrategy.setAllocationStrategyDesc(WmsConstants.DEFAULT_ALLOCATION_STRATEGY);
            retVal = mstAllocationStrategyDao.selectStrategy(queryStrategy);
        }
         if  (!isInCache &amp;&amp; retVal !=  null )
            kMemService.writeObject(REDIS_KEY_ALLOCATION_STRATEGY, retVal, 600);  // 十分钟过期
         return  retVal;
    }
}
</code></pre>

<h2 id="testmasterdataservice"><a name="user-content-testmasterdataservice" href="#testmasterdataservice" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>测试用例(TestMasterDataService)</h2>
<pre><code>/wms-interface-service/src/test/java/com/haiziwang/kwms/downlink/service/TestMasterDataService.java

package  com.haiziwang.kwms.downlink.service;
import  com.alibaba.fastjson.JSON;
import  com.haiziwang.kwms.common.domain.bean.*;
import  org.junit.Test;
import  org.junit.runner.RunWith;
import  org.slf4j.Logger;
import  org.slf4j.LoggerFactory;
import  org.springframework.beans.factory.annotation.Autowired;
import  org.springframework.test.context.ContextConfiguration;
import  org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
/**
 * Copyright: 2016 Haiziwang
 * *
 * Author:  Daniel Kong
 * Date:    2016 - 06 - 27
 * Desc:    MasterDataService 的单元测试
 */
@ ContextConfiguration(locations = { &quot;classpath:/config/test-spring-outbound-config.xml&quot; })
@ RunWith(SpringJUnit4ClassRunner. class )
public   class  TestMasterDataService {
     private   static   final  Logger logger = LoggerFactory.getLogger(TestMasterDataService. class );
     @ Autowired
     private  MasterDataService masterDataService;
     @ Test
     public   void  testGetMstWhFromNo() {
        MstWh mstWh = masterDataService.getMstWhFromNo( &quot;9002&quot; );
        logger.info(JSON.toJSONString(mstWh));
    }

     @ Test
     public   void  testSelectStandardAllocStrategy()  throws  Exception {
        MstAllocationStrategy strategy = masterDataService.selectStandardAllocStrategy();
        logger.info(JSON.toJSONString(strategy));
    }
}
</code></pre>

<h2 id="log4jproperties"><a name="user-content-log4jproperties" href="#log4jproperties" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>log4j.properties</h2>
<pre><code>/wms-interface-web/src/main/resources/log4j.properties

更新 log配置，最多放 10 个备份  
########################
# Rolling File         #
########################
log4j.appender.ROLLING_FILE= org.apache.log4j.RollingFileAppender
log4j.appender.ROLLING_FILE.File= ${log.location}/${log.name}
log4j.appender.ROLLING_FILE.Append= true
log4j.appender.ROLLING_FILE.MaxFileSize= 50MB
log4j.appender.ROLLING_FILE.MaxBackupIndex= 10
log4j.appender.ROLLING_FILE.layout= org.apache.log4j.PatternLayout
log4j.appender.ROLLING_FILE.layout.ConversionPattern= [KWMS   %d{yyy-MM-dd   HH:mm:ss,SSS}](%p)   -   %c   -   (%F:%L)   %m   %n  

</code></pre>

<h2 id="mappermstallocationstrategymapper_1"><a name="user-content-mappermstallocationstrategymapper_1" href="#mappermstallocationstrategymapper_1" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>mapper文件(MstAllocationStrategyMapper)</h2>
<pre><code>
/wms-rpc-outbound-dao/src/main/resources/mybatis.mapper/MstAllocationStrategyMapper.xml

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;
&lt;mapper namespace=&quot;mybatis.mapper.MstAllocationStrategyMapper&quot; &gt;
  &lt;resultMap id=&quot;BaseResultMap&quot; type=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
    &lt;id column=&quot;sys_no&quot; property=&quot;sysNo&quot; jdbcType=&quot;BIGINT&quot; /&gt;
    &lt;result column=&quot;allocation_strategy_no&quot; property=&quot;allocationStrategyNo&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;allocation_strategy_desc&quot; property=&quot;allocationStrategyDesc&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;wh_sys_no&quot; property=&quot;whSysNo&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;wh_no&quot; property=&quot;whNo&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;wh_name&quot; property=&quot;whName&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;company_sys_no&quot; property=&quot;companySysNo&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;company_code&quot; property=&quot;companyCode&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;company_name&quot; property=&quot;companyName&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;comments&quot; property=&quot;comments&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;yn&quot; property=&quot;yn&quot; jdbcType=&quot;INTEGER&quot; /&gt;
    &lt;result column=&quot;ts&quot; property=&quot;ts&quot; jdbcType=&quot;TIMESTAMP&quot; /&gt;
    &lt;result column=&quot;create_time&quot; property=&quot;createTime&quot;  jdbcType=&quot;TIMESTAMP&quot; /&gt;
    &lt;result column=&quot;create_pin&quot; property=&quot;createPin&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;update_pin&quot; property=&quot;updatePin&quot; jdbcType=&quot;VARCHAR&quot; /&gt;
    &lt;result column=&quot;update_time&quot; property=&quot;updateTime&quot;  jdbcType=&quot;TIMESTAMP&quot; /&gt;
  &lt;/resultMap&gt;

  &lt;sql id=&quot;Base_Column_List&quot; &gt;
    sys_no, allocation_strategy_no, allocation_strategy_desc, wh_sys_no, wh_no, wh_name, 
    company_sys_no, company_code, company_name, comments, 
    yn, ts, create_time, create_pin, update_pin,update_time
  &lt;/sql&gt;
    &lt;sql id=&quot;query_where&quot;&gt;
        &lt;if test=&quot;sysNo != null and sysNo != ''&quot; &gt;
            and sys_no = #{sysNo}
        &lt;/if&gt;
        &lt;if test=&quot;allocationStrategyNo != null and allocationStrategyNo != ''&quot; &gt;
            and allocation_strategy_no=#{allocationStrategyNo}
        &lt;/if&gt;
        &lt;if test=&quot;allocationStrategyDesc != null and allocationStrategyDesc != ''&quot; &gt;
            and allocation_strategy_desc like concat('%', #{allocationStrategyDesc}, '%')
        &lt;/if&gt;
        &lt;if test=&quot;whSysNo != null and whSysNo !=''&quot; &gt;
            and wh_sys_no=#{whSysNo}
        &lt;/if&gt;
        &lt;if test=&quot;companySysNo != null and companySysNo !=''&quot; &gt;
            and company_sys_no=#{companySysNo}
        &lt;/if&gt;
        &lt;if test=&quot;whNo != null and whNo !=''&quot; &gt;
            and wh_no=#{whNo}
        &lt;/if&gt;
        &lt;if test=&quot;companyCode != null and companyCode != ''&quot; &gt;
            and company_code=#{companyCode}
        &lt;/if&gt;
        &lt;if test=&quot;yn != null and yn != ''&quot; &gt;
            and yn=#{yn}
        &lt;/if&gt;
    &lt;/sql&gt;

  &lt;select id=&quot;selectMstAllocationStrategyByList&quot; resultMap=&quot;BaseResultMap&quot; parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
    select 
    &lt;include refid=&quot;Base_Column_List&quot; /&gt;
    from mst_allocation_strategy
      where 1=1
      &lt;include refid=&quot;query_where&quot; /&gt;
    order by sys_no desc limit #{start}, #{rows}
  &lt;/select&gt;

  &lt;select id=&quot;selectMstAllocationStrategyByCount&quot; resultType=&quot;java.lang.Integer&quot; parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
    select 
        count(1)
    from mst_allocation_strategy
      where 1=1
      &lt;include refid=&quot;query_where&quot; /&gt;
  &lt;/select&gt;  

  &lt;select id=&quot;selectByPrimaryKey&quot; resultMap=&quot;BaseResultMap&quot; parameterType=&quot;java.lang.Long&quot; &gt;
    select 
    &lt;include refid=&quot;Base_Column_List&quot; /&gt;
    from mst_allocation_strategy
    where sys_no = #{pk,jdbcType=BIGINT}
  &lt;/select&gt;

  &lt;delete id=&quot;deleteByPrimaryKey&quot; parameterType=&quot;java.lang.Long&quot; &gt;
    delete from mst_allocation_strategy
    where sys_no = #{pk,jdbcType=BIGINT}
  &lt;/delete&gt;

  &lt;insert id=&quot;insert&quot; parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
      INSERT INTO mst_allocation_strategy
        (
        allocation_strategy_no, allocation_strategy_desc, 
         wh_sys_no, wh_no, wh_name, company_sys_no, company_code, company_name, comments, 
          yn, ts, create_time, 
          create_pin, update_pin,update_time
        )
        SELECT #{allocationStrategyNo}, #{allocationStrategyDesc}, 
        t1.wh_sys_no,t1.wh_no,t1.wh_name,t2.company_sys_no,t2.company_code,
        t2.company_name,#{comments},#{yn},NOW(),NOW(),#{createPin},#{updatePin},NOW() 
        FROM (SELECT sys_no AS wh_sys_no,wh_no,wh_name FROM mst_wh WHERE  wh _no = #{ whNo }) t1,
        (SELECT sys_no AS company_sys_no,company_code,company_name FROM mst_company WHERE sys_no = #{companySysNo}) t2
        &lt;selectKey keyProperty=&quot;sysNo&quot; order=&quot;AFTER&quot; resultType=&quot;Long&quot;&gt;
            select last_insert_id() as sys_no
        &lt;/selectKey&gt;
  &lt;/insert&gt;
  &lt;insert id=&quot;insertSelective&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;sysNo&quot; parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
    insert into mst_allocation_strategy
    &lt;trim prefix=&quot;(&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot; &gt;
      &lt;if test=&quot;sysNo != null&quot; &gt;
        sys_no,
      &lt;/if&gt;
      &lt;if test=&quot;allocationStrategyNo != null&quot; &gt;
        allocation_strategy_no,
      &lt;/if&gt;
      &lt;if test=&quot;allocationStrategyDesc != null&quot; &gt;
        allocation_strategy_desc,
      &lt;/if&gt;
      &lt;if test=&quot;whNo != null&quot; &gt;
        wh_no,
      &lt;/if&gt;
      &lt;if test=&quot;whName != null&quot; &gt;
        wh_name,
      &lt;/if&gt;
      &lt;if test=&quot;companyCode != null&quot; &gt;
        company_code,
      &lt;/if&gt;
      &lt;if test=&quot;companyName != null&quot; &gt;
        company_name,
      &lt;/if&gt;
      &lt;if test=&quot;comments != null&quot; &gt;
        comments,
      &lt;/if&gt;
      &lt;if test=&quot;yn != null&quot; &gt;
        yn,
      &lt;/if&gt;
      &lt;if test=&quot;ts != null&quot; &gt;
        ts,
      &lt;/if&gt;
        create_time,
      &lt;if test=&quot;createPin != null&quot; &gt;
        create_pin,
      &lt;/if&gt;
      &lt;if test=&quot;updatePin != null&quot; &gt;
        update_pin,
      &lt;/if&gt;
    &lt;/trim&gt;
    &lt;trim prefix=&quot;values (&quot; suffix=&quot;)&quot; suffixOverrides=&quot;,&quot; &gt;
      &lt;if test=&quot;sysNo != null&quot; &gt;
        #{sysNo,jdbcType=BIGINT},
      &lt;/if&gt;
      &lt;if test=&quot;allocationStrategyNo != null&quot; &gt;
        #{allocationStrategyNo,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;allocationStrategyDesc != null&quot; &gt;
        #{allocationStrategyDesc,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;whNo != null&quot; &gt;
        #{whNo,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;whName != null&quot; &gt;
        #{whName,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;companyCode != null&quot; &gt;
        #{companyCode,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;companyName != null&quot; &gt;
        #{companyName,jdbcType=VARCHAR},
      &lt;/if&gt;      
      &lt;if test=&quot;comments != null&quot; &gt;
        #{comments,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;yn != null&quot; &gt;
        #{yn,jdbcType=INTEGER},
      &lt;/if&gt;
      &lt;if test=&quot;ts != null&quot; &gt;
        #{ts,jdbcType=TIMESTAMP},
      &lt;/if&gt;
        now(),
      &lt;if test=&quot;createPin != null&quot; &gt;
        #{createPin,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;updatePin != null&quot; &gt;
        #{updatePin,jdbcType=VARCHAR},
      &lt;/if&gt;
    &lt;/trim&gt;
  &lt;/insert&gt;

  &lt;update id=&quot;updateByPrimaryKeySelective&quot; parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
    update mst_allocation_strategy
    &lt;set &gt;
      &lt;if test=&quot;allocationStrategyNo != null&quot; &gt;
        allocation_strategy_no = #{allocationStrategyNo,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;allocationStrategyDesc != null&quot; &gt;
        allocation_strategy_desc = #{allocationStrategyDesc,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;whSysNo != null  and whSysNo != ''&quot;  &gt;
          wh_sys_no = #{whSysNo},
          wh_no = (select t1.wh_no from (SELECT sys_no AS wh_sys_no,wh_no,wh_name FROM mst_wh WHERE sys_no = #{whSysNo}) t1),
        wh_name = (select t1.wh_name from (SELECT sys_no AS wh_sys_no,wh_no,wh_name FROM mst_wh WHERE sys_no = #{whSysNo}) t1),
      &lt;/if&gt;
      &lt;if test=&quot;whNo != null and whNo != ''&quot; &gt;
        wh_sys_no = (select t1.wh_sys_no from (SELECT sys_no AS wh_sys_no,wh_no,wh_name FROM mst_wh WHERE wh_no = #{whNo}) t1),
        wh_no = (select t1.wh_no from (SELECT sys_no AS wh_sys_no,wh_no,wh_name FROM mst_wh WHERE wh_no = #{whNo}) t1),
        wh_name = (select t1.wh_name from (SELECT sys_no AS wh_sys_no,wh_no,wh_name FROM mst_wh WHERE wh_no = #{whNo}) t1),
      &lt;/if&gt;
      &lt;if test=&quot;companySysNo != null&quot; &gt;
          company_sys_no = #{companySysNo,jdbcType=VARCHAR},
          company_code = (select t1.company_code from (SELECT sys_no AS company_sys_no,company_code,company_name FROM mst_company WHERE sys_no = #{companySysNo}) t1),
        company_name = (select t1.company_name from (SELECT sys_no AS company_sys_no,company_code,company_name FROM mst_company WHERE sys_no = #{companySysNo}) t1),
      &lt;/if&gt;
      &lt;if test=&quot;comments != null&quot; &gt;
        comments = #{comments,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;yn != null&quot; &gt;
        yn = #{yn,jdbcType=INTEGER},
      &lt;/if&gt;
      &lt;if test=&quot;ts != null&quot; &gt;
        ts = #{ts,jdbcType=TIMESTAMP},
      &lt;/if&gt;
      &lt;if test=&quot;createPin != null&quot; &gt;
        create_pin = #{createPin,jdbcType=VARCHAR},
      &lt;/if&gt;
      &lt;if test=&quot;updatePin != null&quot; &gt;
        update_pin = #{updatePin,jdbcType=VARCHAR},
      &lt;/if&gt;
      update_time = now()
    &lt;/set&gt;
    where sys_no = #{sysNo,jdbcType=BIGINT}
  &lt;/update&gt;

  &lt;update id=&quot;updateByPrimaryKey&quot; parameterType=&quot;com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy&quot; &gt;
    update mst_allocation_strategy
    set allocation_strategy_no = #{allocationStrategyNo,jdbcType=VARCHAR},
      allocation_strategy_desc = #{allocationStrategyDesc,jdbcType=VARCHAR},
      wh_no = #{whNo,jdbcType=VARCHAR},
      wh_name = #{whName,jdbcType=VARCHAR},
      company_code=#{companyCode,jdbcType=VARCHAR},
      company_name=#{companyName,jdbcType=VARCHAR},
      comments = #{comments,jdbcType=VARCHAR},
      yn = #{yn,jdbcType=INTEGER},
      ts = #{ts,jdbcType=TIMESTAMP},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      create_pin = #{createPin,jdbcType=VARCHAR},
      update_pin = #{updatePin,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=TIMESTAMP}
    where sys_no = #{sysNo,jdbcType=BIGINT}
  &lt;/update&gt; &lt;/mapper&gt;   

</code></pre>

<h2 id="rulesys-operate-log-rule"><a name="user-content-rulesys-operate-log-rule" href="#rulesys-operate-log-rule" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>rule(sys-operate-log-rule)</h2>
<pre><code>/wms-rpc-outbound-dao/src/main/resources/rules/sys-operate-log-rule.xml

&lt;rules&gt;
    &lt;rule&gt;
        &lt;namespace&gt;mybatis.mapper.SysOperateLogMapper&lt;/namespace&gt;
        &lt;shards&gt;partition2&lt;/shards&gt;
    &lt;/rule&gt; &lt;/rules&gt;   

</code></pre>

<h2 id="allocationstrategybusinessservice"><a name="user-content-allocationstrategybusinessservice" href="#allocationstrategybusinessservice" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>接口（AllocationStrategyBusinessService）</h2>
<pre><code>/wms-rpc-outbound-service/src/main/java/com/haiziwang/kwms/outbound/business/AllocationStrategyBusinessService.java

package com.haiziwang.kwms.outbound.business;

import com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyListResDto;
import com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyReqDto;
import com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyResDto;
import org.springframework.transaction.annotation.Transactional;

import java.lang.reflect.InvocationTargetException;
import java.util.List;

public interface AllocationStrategyBusinessService
{

    /**
     * @param reqDto 请求参数对象
     * @return
     * @throws NoSuchMethodException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @desc 根据查询条件查询列表
     */
    @Transactional
    public MstAllocationStrategyListResDto selectMstAllocationStrategyByList(MstAllocationStrategyReqDto reqDto)
            throws IllegalAccessException, InvocationTargetException, NoSuchMethodException;



    /**
     * @param reqDto
     * @throws NoSuchMethodException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @desc 新增新纪录
     */
    @Transactional
    public void addMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
            throws IllegalAccessException, InvocationTargetException, NoSuchMethodException;

    /**
     * @param reqDto
     * @return
     * @throws NoSuchMethodException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @desc 新增新纪录
     */
    @Transactional
    public void delMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
            throws IllegalAccessException, InvocationTargetException, NoSuchMethodException;

    /**
     * @param reqDto
     * @return
     * @throws NoSuchMethodException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @desc 查询纪录
     */
    @Transactional
    public MstAllocationStrategyResDto selectMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
            throws IllegalAccessException, InvocationTargetException, NoSuchMethodException;

    /**
     * @param reqDto
     * @return
     * @throws NoSuchMethodException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @desc 更新纪录
     */
    @Transactional
    public void updateMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
            throws IllegalAccessException, InvocationTargetException, NoSuchMethodException;

    /**
     * @param reqDto
     * @return
     * @throws NoSuchMethodException
     * @throws InvocationTargetException
     * @throws IllegalAccessException
     * @desc 批量更新纪录
     */
    @Transactional
    public void updateMstAllocationStrategy(List&lt;MstAllocationStrategyReqDto&gt; reqDto)
            throws IllegalAccessException, InvocationTargetException, NoSuchMethodException;

    @Transactional
    public Integer selectMstAllocationStrategyByCount(MstAllocationStrategyReqDto reqDto);

}

</code></pre>

<h2 id="allocationstrategybusinessserviceimpl"><a name="user-content-allocationstrategybusinessserviceimpl" href="#allocationstrategybusinessserviceimpl" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>实现类（AllocationStrategyBusinessServiceImpl）</h2>
<pre><code>/wms-rpc-outbound-service/src/main/java/com/haiziwang/kwms/outbound/business/impl/AllocationStrategyBusinessServiceImpl.java

package  com.haiziwang.kwms.outbound.business.impl;
import  java.lang.reflect.InvocationTargetException;
import  java.util.Date;
import  java.util.List;
import  com.haiziwang.kwms.common.domain.util.StringUtils;
import  org.apache.commons.beanutils.PropertyUtils;
import  org.springframework.beans.factory.annotation.Autowired;
import  org.springframework.stereotype.Service;
import  org.springframework.transaction.annotation.Transactional;
import  com.haiziwang.kwms.common.domain.bean.MstAllocationStrategy;
import  com.haiziwang.kwms.common.domain.bean.MstAllocationStrategyDetail;
import  com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyListResDto;
import  com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyReqDto;
import  com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyResDto;
import  com.haiziwang.kwms.common.domain.enums.OrderBusinessTypeEnum;
import  com.haiziwang.kwms.common.domain.enums.ResultStateEnum;
import  com.haiziwang.kwms.common.domain.enums.RuleSpaceEnum;
import  com.haiziwang.kwms.common.domain.enums.RuleTimeEnum;
import  com.haiziwang.kwms.common.domain.exception.WMS3UnCheckedException;
import  com.haiziwang.kwms.outbound.business.AllocationStrategyBusinessService;
import  com.haiziwang.kwms.outbound.dao.MstAllocationStrategyDao;
import  com.haiziwang.kwms.outbound.dao.MstAllocationStrategyDetailDao;
@ Service( &quot;allocationStrategyBusinessService&quot; )
public   class  AllocationStrategyBusinessServiceImpl  implements  AllocationStrategyBusinessService
{
     @ Autowired
     private  MstAllocationStrategyDao mstAllocationStrategyDao;
     @ Autowired
     private  MstAllocationStrategyDetailDao mstAllocationStrategyDetailDao;
     @ Override
     public  MstAllocationStrategyListResDto selectMstAllocationStrategyByList(MstAllocationStrategyReqDto reqDto)
             throws  IllegalAccessException, InvocationTargetException, NoSuchMethodException
    {
        MstAllocationStrategyListResDto resDto =  new  MstAllocationStrategyListResDto();
        MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
        PropertyUtils.copyProperties(mstAllocationStrategy, reqDto);
         int  cont = mstAllocationStrategyDao.selectMstAllocationStrategyDaoByCont(mstAllocationStrategy); //根据条件查询总记录数
        List&lt;MstAllocationStrategy&gt; list = mstAllocationStrategyDao.selectMstAllocationStrategyByList(mstAllocationStrategy);
        resDto.setResultCode(String.valueOf(ResultStateEnum.SUCCESS.getCode()));
        resDto.setResultMsg(ResultStateEnum.SUCCESS.getDesc());
        resDto.setList(list);
        resDto.setTotalCont(cont);
         return  resDto;
    }
     @ Override
     public  Integer selectMstAllocationStrategyByCount(MstAllocationStrategyReqDto reqDto)
    {
        MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
        mstAllocationStrategy.setAllocationStrategyNo(reqDto.getAllocationStrategyNo());
         return  mstAllocationStrategyDao.selectMstAllocationStrategyDaoByCont(mstAllocationStrategy);
    }
     @ Override
     @ Transactional
     public   void  addMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
             throws  IllegalAccessException, InvocationTargetException, NoSuchMethodException, WMS3UnCheckedException
    {
        MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
        mstAllocationStrategy.setAllocationStrategyNo(reqDto.getAllocationStrategyNo());
         int  n = mstAllocationStrategyDao.selectMstAllocationStrategyDaoByCont(mstAllocationStrategy);
         if  (n &gt; 0)
        {
             throw   new  WMS3UnCheckedException(ResultStateEnum.FAIL.getCode().toString(),  &quot;重复的编码&quot; );
        }
        PropertyUtils.copyProperties(mstAllocationStrategy, reqDto);
         //        mstAllocationStrategy.setAllocationStrategyNo(mstSequenceService.getSequence(SequenceEnum.ALLOCATION));
        mstAllocationStrategyDao.addMstAllocationStrategy(mstAllocationStrategy);
        List&lt;MstAllocationStrategyDetail&gt; list = reqDto.getList();
        Date d =  new  Date();
         if  ( null  != list &amp;&amp; !list.isEmpty())
        {
             for  (MstAllocationStrategyDetail detail : list)
            {
                detail.setAllocationStrategySysNo(mstAllocationStrategy.getSysNo());
//                detail.setIsRep(0);
                detail.setCreateTime(d);
                detail.setCreatePin(reqDto.getCreatePin());
                detail.setUpdatePin(reqDto.getCreatePin());
                detail.setUpdateTime(d);
                mstAllocationStrategyDetailDao.addMstAllocationStrategyDetail(detail);
            }
        }

    }
     @ Override
     @ Transactional
     public   void  delMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
             throws  IllegalAccessException, InvocationTargetException, NoSuchMethodException
    {
        MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
        PropertyUtils.copyProperties(mstAllocationStrategy, reqDto);
        mstAllocationStrategyDao.deleteMstAllocationStrategyBySynNo(mstAllocationStrategy);
        MstAllocationStrategyDetail detail =  new  MstAllocationStrategyDetail();
        detail.setAllocationStrategySysNo(mstAllocationStrategy.getSysNo());
        mstAllocationStrategyDetailDao.delMstAllocationStrategyDetailByMoveSynNo(detail);
    }
     @ Override
     public  MstAllocationStrategyResDto selectMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
             throws  IllegalAccessException, InvocationTargetException, NoSuchMethodException
    {
        MstAllocationStrategyResDto resDto =  new  MstAllocationStrategyResDto();
        MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
        PropertyUtils.copyProperties(mstAllocationStrategy, reqDto);
        mstAllocationStrategy = mstAllocationStrategyDao.queryOneBySysNo(mstAllocationStrategy);
        PropertyUtils.copyProperties(resDto, mstAllocationStrategy);
        MstAllocationStrategyDetail detail =  new  MstAllocationStrategyDetail();
        detail.setAllocationStrategySysNo(mstAllocationStrategy.getSysNo());
        List&lt;MstAllocationStrategyDetail&gt; list = mstAllocationStrategyDetailDao.selectMstAllocationStrategyDetailByList(detail);
         if  ( null  != list &amp;&amp; !list.isEmpty())
        {
             for  (MstAllocationStrategyDetail detailInfo : list)
            {
                detailInfo.setOrderTypeName(OrderBusinessTypeEnum.getByCode(detailInfo.getOrderType()).getDesc());
                 if  ( null  != detailInfo.getAllocRuleTime() &amp;&amp; ! &quot;&quot; .equals(detailInfo.getAllocRuleTime()))
                {
                    detailInfo.setAllocRuleTimeName(RuleTimeEnum.getByCode(detailInfo.getAllocRuleTime()).getDesc());
                }
                 if  ( null  != detailInfo.getAllocRuleSpace() &amp;&amp; ! &quot;&quot; .equals(detailInfo.getAllocRuleSpace()))
                {
                    detailInfo.setAllocRuleSpaceName(RuleSpaceEnum.getByCode(detailInfo.getAllocRuleSpace()).getDesc());
                }
            }
        }
        resDto.setList(list);
         return  resDto;
    }
     /**
     *  @param  reqDto
     *  @return
     *  @throws  NoSuchMethodException
     *  @throws  InvocationTargetException
     *  @throws  IllegalAccessException
     *  @desc  编辑，删除明细，重新插入
     */
     @ Override
     @ Transactional
     public   void  updateMstAllocationStrategy(MstAllocationStrategyReqDto reqDto)
             throws  IllegalAccessException, InvocationTargetException, NoSuchMethodException
    {
        MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
        PropertyUtils.copyProperties(mstAllocationStrategy, reqDto);
        mstAllocationStrategyDao.updateMstAllocationStrategyBySynNo(mstAllocationStrategy);
        MstAllocationStrategyDetail detail =  new  MstAllocationStrategyDetail();
        detail.setAllocationStrategySysNo(mstAllocationStrategy.getSysNo());
        mstAllocationStrategyDetailDao.delMstAllocationStrategyDetailByMoveSynNo(detail);
        List&lt;MstAllocationStrategyDetail&gt; list = reqDto.getList();
        Date date =  new  Date();
         for  (MstAllocationStrategyDetail d : list)
        {
            d.setAllocationStrategySysNo(mstAllocationStrategy.getSysNo());
            d.setCreateTime(date);
            d.setCreatePin(reqDto.getCreatePin());
            d.setUpdatePin(reqDto.getCreatePin());
            d.setUpdateTime(date);
            mstAllocationStrategyDetailDao.addMstAllocationStrategyDetail(d);
        }
    }
     @ Override
     @ Transactional
     public   void  updateMstAllocationStrategy(List&lt;MstAllocationStrategyReqDto&gt; reqDto)
             throws  IllegalAccessException, InvocationTargetException, NoSuchMethodException
    {
         for  (MstAllocationStrategyReqDto d : reqDto)
        {
            MstAllocationStrategy mstAllocationStrategy =  new  MstAllocationStrategy();
            PropertyUtils.copyProperties(mstAllocationStrategy, d);
            mstAllocationStrategyDao.updateMstAllocationStrategyBySynNo(mstAllocationStrategy);
        }
    }
}
</code></pre>

<h2 id="controllermstallocationstrategycontroller"><a name="user-content-controllermstallocationstrategycontroller" href="#controllermstallocationstrategycontroller" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Controller(MstAllocationStrategyController)</h2>
<pre><code>/wms-rpc-outbound-web/src/main/java/com/haiziwang/kwms/outbound/controller/MstAllocationStrategyController.java

package  com.haiziwang.kwms.outbound.controller;
import  java.util.ArrayList;
import  java.util.List;
import  org.slf4j.Logger;
import  org.slf4j.LoggerFactory;
import  org.springframework.beans.factory.annotation.Autowired;
import  org.springframework.web.bind.annotation.RequestBody;
import  org.springframework.web.bind.annotation.RequestMapping;
import  org.springframework.web.bind.annotation.RequestMethod;
import  org.springframework.web.bind.annotation.RequestParam;
import  org.springframework.web.bind.annotation.RestController;
import  com.alibaba.fastjson.JSON;
import  com.haiziwang.kwms.common.domain.bean.EnumBean;
import  com.haiziwang.kwms.common.domain.bean.SysDataFilter;
import  com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyListResDto;
import  com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyReqDto;
import  com.haiziwang.kwms.common.domain.dto.mst.MstAllocationStrategyResDto;
import  com.haiziwang.kwms.common.domain.enums.RuleSpaceEnum;
import  com.haiziwang.kwms.common.domain.enums.RuleTimeEnum;
import  com.haiziwang.kwms.common.domain.util.PageRespJson;
import  com.haiziwang.kwms.common.domain.util.RespJson;
import  com.haiziwang.kwms.common.domain.util.StringUtils;
import  com.haiziwang.kwms.outbound.service.ISysDataFilterService;
import  com.haiziwang.kwms.outbound.service.MstAllocationStrategyService;
/**
 * Created by Administrator on 2016/2/26.
 */
@ RestController
public   class  MstAllocationStrategyController {
     private   static   final  Logger logger = LoggerFactory.getLogger(MstAllocationStrategyController. class );
     @ Autowired
     private  MstAllocationStrategyService mstAllocationStrategyService;

     @ Autowired
     private  ISysDataFilterService sysDataFilterService;
     /**
     * 根据查询条件获取 分配策略 列表
     *
     *  @param  draw               请求ID （Datatable 后端分页功能需要该参数）
     *  @param  start               待查询的开始索引，该参数用于SQL查询语句 limit a, b 的 a 部分
     *  @param  rows                返回记录条数，该参数用于SQL查询语句 limit a, b 的 b 部分
     *  @param  allocationStrategyDesc 描述
     *  @return  符合查询条件的 分配策略 列表
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/list&quot; , method = RequestMethod.GET)
     public  PageRespJson getAllocationStrategyList( @ RequestParam( &quot;draw&quot; )  int  draw,
                                                @ RequestParam( &quot;start&quot; )  int  start,
                                                @ RequestParam( &quot;rows&quot; )  int  rows,
                                                @ RequestParam(value =  &quot;allocationStrategyDesc&quot; , required =  false ) String allocationStrategyDesc,
                                                @ RequestParam(value =  &quot;whNo&quot; , required =  false ) String whNo,
                                                @ RequestParam(value =  &quot;companySysNo&quot; , required =  false ) String companySysNo) {
        logger.info( &quot;查询分配策略列表&quot; );
         /**
         * 根据url参数构建 分配策略 请求bean
         */
        MstAllocationStrategyReqDto reqDto =  new  MstAllocationStrategyReqDto(draw, start, rows);
        reqDto.setAllocationStrategyDesc(allocationStrategyDesc);
        reqDto.setWhNo(whNo);
        reqDto.setCompanySysNo(companySysNo);
        reqDto.setStart(start);
        reqDto.setRows(rows);
        MstAllocationStrategyListResDto mstAllocationStrategyListResDto =  null ;
         try  {
            mstAllocationStrategyListResDto = mstAllocationStrategyService.selectMstAllocationStrategyByList(reqDto);
        }  catch  (Exception e) {
             return  PageRespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()), draw);
        }
         if  (mstAllocationStrategyListResDto ==  null )
            mstAllocationStrategyListResDto =  new  MstAllocationStrategyListResDto();
         return  PageRespJson.buildSuccessResponse(mstAllocationStrategyListResDto.getList(), draw, mstAllocationStrategyListResDto.getTotalCont());
    }
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/alllist&quot; , method = RequestMethod.GET)
     public  PageRespJson getAllocationStrategyAllList( @ RequestParam(value =  &quot;whSysNo&quot; , required =  false ) String whSysNo,
     @ RequestParam(value =  &quot;whNo&quot; , required =  false ) String whNo) {
        logger.info( &quot;查询所有分配策略列表&quot; );
         /**
         * 根据url参数构建 分配策略 请求bean
         */
        MstAllocationStrategyReqDto reqDto =  new  MstAllocationStrategyReqDto(1, 0, 10000);
        reqDto.setStart(0);
        reqDto.setRows(10000);
        reqDto.setWhSysNo(whSysNo);
        reqDto.setWhNo(whNo);
        MstAllocationStrategyListResDto mstAllocationStrategyListResDto =  null ;
         try  {
            mstAllocationStrategyListResDto = mstAllocationStrategyService.selectMstAllocationStrategyByList(reqDto);
        }  catch  (Exception e) {
             return  PageRespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()), 1);
        }
         if  (mstAllocationStrategyListResDto ==  null )
            mstAllocationStrategyListResDto =  new  MstAllocationStrategyListResDto();
         return  PageRespJson.buildSuccessResponse(mstAllocationStrategyListResDto.getList(), 1, mstAllocationStrategyListResDto.getTotalCont());
    }
     /**
     * 创建新的 分配策略
     *
     *  @param  reqDto 待创建的分配策略
     *  @return  创建成功/失败的结果
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/create&quot; , method = RequestMethod.POST, headers = {
             &quot;Accept=application/json; charset=UTF-8&quot; ,  &quot;Content-Type=application/json&quot; })
     public  RespJson createAllocationStrategy( @ RequestBody MstAllocationStrategyReqDto reqDto) {
        logger.info( &quot;创建新的分配策略：&quot;  + JSON.toJSONString(reqDto));
         try  {
            mstAllocationStrategyService.addMstAllocationStrategy(reqDto);
        }  catch  (Exception e) {
             return  RespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()));
        }
         return  RespJson.buildSuccessResponse();
    }

     /**
     * 修改分配策略
     *
     *  @param  reqDto 待修改的分配策略
     *  @return  修改成功/失败的结果
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/update&quot; , method = RequestMethod.POST, headers = {
             &quot;Accept=application/json; charset=UTF-8&quot; ,  &quot;Content-Type=application/json&quot; })
     public  RespJson updateAllocationStrategy( @ RequestBody MstAllocationStrategyReqDto reqDto) {
        logger.info( &quot;修改分配策略：&quot;  + JSON.toJSONString(reqDto));
         try  {
            mstAllocationStrategyService.updateMstAllocationStrategy(reqDto);
        }  catch  (Exception e) {
             return  RespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()));
        }
         return  RespJson.buildSuccessResponse();
    }
     /**
     * 查询单条 分配策略
     *
     *  @param  sysNo 分配策略内部主键
     *  @return  查询到的分配策略信息
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/info&quot; , method = RequestMethod.GET)
     public  RespJson getAllocationStrategyDetailList( @ RequestParam( &quot;id&quot; )  long  sysNo) {
        logger.info( &quot;查询单条 分配策略：sysNo = &quot;  + sysNo);
        MstAllocationStrategyReqDto reqDto =  new  MstAllocationStrategyReqDto();
        reqDto.setSysNo(sysNo);
         try  {
            MstAllocationStrategyResDto resDto = mstAllocationStrategyService.selectMstAllocationStrategy(reqDto);
             return  RespJson.buildSuccessResponse(resDto);
        }  catch  (Exception e) {
             return  RespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()));
        }
    }
     /**
     * 删除单条 分配策略
     *
     *  @param  sysNo 分配策略内部主键
     *  @return
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/delete&quot; , method = RequestMethod.GET)
     public  RespJson delAllocationStrategyList( @ RequestParam( &quot;id&quot; )  long  sysNo) {
        logger.info( &quot;删除单条 分配策略：sysNo = &quot;  + sysNo);
        MstAllocationStrategyReqDto reqDto =  new  MstAllocationStrategyReqDto();
        reqDto.setSysNo(sysNo);
         try  {
            MstAllocationStrategyResDto resDto = mstAllocationStrategyService.delMstAllocationStrategy(reqDto);
             return  RespJson.buildSuccessResponse(resDto);
        }  catch  (Exception e) {
             return  RespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()));
        }
    }


     /**
     * 获取时间定位规则列表 (Add by liuxy)
     *
     *  @return  符合条件的信息集
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/ruleTimeList&quot; , method = RequestMethod.GET)
     public  RespJson selectRuleTimeList() {
        List&lt;EnumBean&gt; enumValueList =  new  ArrayList&lt;EnumBean&gt;();
         for  (RuleTimeEnum ruleTimeEnum : RuleTimeEnum.values()) {
            EnumBean enumBean =  new  EnumBean();
            enumBean.setKey(String.valueOf(ruleTimeEnum.getCode()));
            enumBean.setValue(ruleTimeEnum.getDesc());
            enumValueList.add(enumBean);
        }
         return  RespJson.buildSuccessResponse(enumValueList);
    }


     /**
     * 获取空间定位规则列表 (Add by liuxy)
     *
     *  @return  符合条件的信息集
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/ruleSpaceList&quot; , method = RequestMethod.GET)
     public  RespJson selectRuleSpaceList() {
        List&lt;EnumBean&gt; enumValueList =  new  ArrayList&lt;EnumBean&gt;();
         for  (RuleSpaceEnum ruleSpaceEnum : RuleSpaceEnum.values()) {
            EnumBean enumBean =  new  EnumBean();
            enumBean.setKey(String.valueOf(ruleSpaceEnum.getCode()));
            enumBean.setValue(ruleSpaceEnum.getDesc());
            enumValueList.add(enumBean);
        }
         return  RespJson.buildSuccessResponse(enumValueList);
    }

     /**
     * 根据sysNo查找对应的数据筛选器信息
     *
     *  @param  sysNo 数据筛选器编码
     *  @return  查询到的数据筛选器信息
     */
     @ RequestMapping(value =  &quot;/mst-allocation-strategy/getDataFilterInfo&quot; , method = RequestMethod.GET)
     public  RespJson getDataFilterInfo( @ RequestParam( &quot;sysNo&quot; ) Long sysNo) {
        logger.info( &quot;查询单条 数据筛选器信息：sysNo = &quot;  + sysNo);
        SysDataFilter reqDto =  new  SysDataFilter();
        reqDto.setSysNo(sysNo);
         try  
        {
            SysDataFilter resDto = sysDataFilterService.selectSysDataFilerInfo(reqDto);
             return  RespJson.buildSuccessResponse(resDto);
        }  catch  (Exception e) {
             return  RespJson.buildFailureResponse(StringUtils.getValidString(e.getMessage()));
        }
    }

}
</code></pre>

<h2 id="allocation-strategy-add-controllerjs"><a name="user-content-allocation-strategy-add-controllerjs" href="#allocation-strategy-add-controllerjs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-add-controller.js</h2>
<pre><code>/wms-web/src/main/webapp/js/controllers/strategy/allocation-strategy-add-controller.js

wmsApp.controller( 'allocateStrategyAddController' , [ '$scope' ,  '$rootScope' , '$modal' , '$compile' ,  '$modalInstance' ,  'authService' ,  'masterDataService' , 'allocationStrategyService' ,  'DTInstances' ,  'DTOptionsBuilder' ,  'DTColumnDefBuilder' ,
     function  ($scope, $rootScope,$modal, $compile, $modalInstance, authService, masterDataService, allocationStrategyService, DTInstances, DTOptionsBuilder, DTColumnDefBuilder) {
        $scope.criteria = {
            toWhSysNo:  '' ,
            companySysNo:  ''
        };
        $scope.isDisabled =  true ;

        $scope.selectIdSet = {};
        $scope.allIds = [];
        $scope.allCheckItem =  false ;
         /**
          *   选中某一个
          */
        $scope.checkItemfrom =  function  (sysNo) {
             if ($scope.selectIdSet[sysNo] == -1){
                 delete   $scope.selectIdSet[sysNo];
            } else {
                $scope.selectIdSet[sysNo] = -1;
            }
        };

         /**
          *   提交到后台的bean对象
          */
        $scope.allocStrategyBean = {
            allocationStrategyDesc :  '' ,
            whNo:  '' ,
            companySysNo:  '' ,
            list:[]
        };
         // 设置默认仓库
        $scope.whNo = authService.getUser().whNo;
         /**
          *   获取仓库列表
          */
        $scope.toWhOptions = [];
         if  ($scope.toWhOptions.length === 0) {
            masterDataService.getWhList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.toWhOptions = reply.data;
                }
            });
        }
        $scope.changeToWh =  function  (toWh) {
            $scope.criteria.toWhSysNo = !(toWh.index) ?  ''  : $scope.toWhOptions[toWh.index].sysNo;
        };
         /**
          *   获取货主列表
          */
        $scope.companyOptions = [];
         if  ($scope.companyOptions.length === 0) {
            masterDataService.getCompanyList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.companyOptions = reply.data;
                }
            });
        }
        $scope.changeCompany =  function  (company) {
            $scope.criteria.companySysNo = !(company.index) ?  ''  : $scope.companyOptions[company.index].sysNo;
        };

//        /**
//         * 出库类型
//         1 销售出库
//         2 内配出库
//         3 退厂出库
//         4 备件出库
//         5 取件出库
//         6 报废出库
//         */
//        var getorderType = function (data) {
//            if(data == &quot;1&quot;){
//                return &quot;线上销售&quot;
//            }else if(data == &quot;2&quot;){
//                return &quot;门店配送&quot;
//            }else if(data == &quot;3&quot;){
//                return &quot;调拨出库&quot;
//            }else if(data == &quot;4&quot;){
//                return &quot;退厂出库&quot;
//            }else{
//                return &quot;&quot;
//            }
//        };
//
//
//        /**
//         * 时间定位规则：1先进先出、2后进先出、3先到期先出
//         * @param data
//         * @returns {string}
//         */
//        var getallocRuleTime = function (data) {
//            if(data == &quot;1&quot;){
//                return &quot;先进先出&quot;
//            }else if(data == &quot;2&quot;){
//                return &quot;后进先出&quot;
//            }else if(data == &quot;3&quot;){
//                return &quot;先到期先出&quot;
//            }else{
//                return &quot;&quot;
//            }
//        };
//
//
//        /**
//         * 空间定位规则：1清空储位、2最少拣货储位
//         * @param data
//         */
//        var allocRuleSpace = function(data){
//            if(data == &quot;1&quot;){
//                return &quot;清空储位&quot;
//            }else if(data == &quot;2&quot;){
//                return &quot;最少拣货储位&quot;
//            }else{
//                return &quot;&quot;
//            }
//        }

         /**
          *   定义表格的所有列
          */
        $scope.dtColumnDefs = [DTColumnDefBuilder.newColumnDef(0).notSortable(),
            DTColumnDefBuilder.newColumnDef(1).notSortable(),
            DTColumnDefBuilder.newColumnDef(2).notSortable(),
            DTColumnDefBuilder.newColumnDef(3).notSortable(),
            DTColumnDefBuilder.newColumnDef(4).notSortable(),
            DTColumnDefBuilder.newColumnDef(5).notSortable(),
            DTColumnDefBuilder.newColumnDef(6).notSortable(),
            DTColumnDefBuilder.newColumnDef(7).notSortable(),
            DTColumnDefBuilder.newColumnDef(8).notSortable(),
            DTColumnDefBuilder.newColumnDef(9).notSortable(),
            DTColumnDefBuilder.newColumnDef(10).notSortable(),
            DTColumnDefBuilder.newColumnDef(11).notSortable()];

         /**
          *   DataTables   的前端分页设置
          */
        $scope.dtOptions = DTOptionsBuilder.newOptions().withBootstrap()
            .withOption( 'order' , [])
            .withOption( 'bFilter' ,  false )
            .withOption( 'bLengthChange' ,  false )
            .withOption( 'displayLength' , 5)
            .withOption( 'autoWidth' ,  false )
            .withOption( 'scrollX' ,  '100%' );
         /**
          *   保存
          */
        $scope.startAllocate =  function  () {
             if  ($scope.whNo ==  &quot;&quot;  || $scope.whNo ==  undefined ) {
                alert( &quot;请选择仓库&quot; )
                 return   false ;
            }
             if  ($scope.criteria.companySysNo ==  &quot;&quot; ) {
                alert( &quot;请选择货主&quot; )
                 return   false ;
            }

             if  ($scope.allocationStrategyDesc ==  &quot;&quot;  || $scope.allocationStrategyDesc ==  undefined ){
                alert( &quot;请输入描述&quot; )
                 return   false ;
            }

            $scope.allocStrategyBean.allocationStrategyDesc = $scope.allocationStrategyDesc;
            $scope.allocStrategyBean.whNo = $scope.whNo;
            $scope.allocStrategyBean.companySysNo = $scope.criteria.companySysNo;

            $rootScope.loadingPromise = startAllocate($scope.allocStrategyBean).success( function  (res) {
                 if (res.resultCode ==  &quot;0&quot; ){
                    alert(res.resultMsg);
                } else {
                    alert( &quot;新增成功!&quot; );
                    $modalInstance.close(1);
                }
            });

        };
         var  startAllocate =  function (allocStrategyBean){
             return  allocationStrategyService.startAllocate(allocStrategyBean)
        };

         /**
          *   新增分配策略明细
          */
        $scope.addAllocateStrategyDetail =  function (){
             var  modalInstance = $modal.open({
                templateUrl:  'views/strategy/allocation-strategy-detail-add.html' ,
                controller:  'allocateStrategyDetailAddController' ,
                backdrop:  'static'
            });
             return  modalInstance.result.then( function  (reply) {
                  reply.allocationDetailNo = $scope.allocStrategyBean.list.length + 1;
                  $scope.allIds.push(reply.allocationDetailNo);
                  $scope.allocStrategyBean.list.push(reply);
            });
        }

         /**
          *   修改分配策略明细
          */
        $scope.editAllocateStrategyDetail =  function (){
             var  allocateidArr = [];
             for  ( var  index  in  $scope.allIds)
            {
                 if ($scope.selectIdSet[$scope.allIds[index]] == -1) {
                    allocateidArr.push($scope.allocStrategyBean.list[parseInt($scope.allIds[index]) -1].allocationDetailNo);
                }
            }
             if (allocateidArr.length != 1){
                alert( &quot;请选择一条分配策略明细&quot; )
            } else {
                allocationStrategyService.setOrderType($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].orderType);
                allocationStrategyService.setAllocRuleTime($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleTime);
                allocationStrategyService.setAllocRuleSpace($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleSpace);
                allocationStrategyService.setPickLocDataFilterSysNo($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterSysNo);
                allocationStrategyService.setRepLocDataFilterSysNo($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterSysNo);
                allocationStrategyService.setIsRep($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].isRep);

                 var  modalInstance = $modal.open({
                    templateUrl:  'views/strategy/allocation-strategy-detail-edit.html' ,
                    controller:  'allocateStrategyDetailEditController' ,
                    backdrop:  'static'
                });
                 return  modalInstance.result.then( function  (reply) {
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].orderType = reply.orderType;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].orderTypeName = reply.orderTypeName;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleTime = reply.allocRuleTime;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleTimeName = reply.allocRuleTimeName;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleSpace = reply.allocRuleSpace;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleSpaceName = reply.allocRuleSpaceName;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterSysNo = reply.pickLocDataFilterSysNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterNo = reply.pickLocDataFilterNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterDesc = reply.pickLocDataFilterDesc;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterSysNo = reply.repLocDataFilterSysNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterNo = reply.repLocDataFilterNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterDesc = reply.repLocDataFilterDesc;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].isRep = reply.isRep;

                     // 清空勾选项
                    $scope.checkItemfrom(allocateidArr[0]);
                    $scope.dtInstance.rerender();
                });
            }
        }
         /**
          *   对话框关闭响应
          */
        $scope.close =  function  () {
            $modalInstance.close( 'refresh' );
            $modalInstance.dismiss( 'close' );
        };

         /**
          *   获得   dtInstance
          */
        DTInstances.getLast().then( function  (dtInstance) {
            $scope.dtInstance = dtInstance;
        });     }]);   

</code></pre>

<h2 id="allocation-strategy-controllerjs"><a name="user-content-allocation-strategy-controllerjs" href="#allocation-strategy-controllerjs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-controller.js</h2>
<pre><code>/wms-web/src/main/webapp/js/controllers/strategy/allocation-strategy-controller.js

wmsApp.controller( 'allocationStrategyController' , [ '$scope' ,  '$rootScope' ,  '$modal' ,  '$compile' ,  'authService' ,  'masterDataService' ,  'allocationStrategyService' ,  'DTInstances' ,  'DTOptionsBuilder' ,  'DTColumnDefBuilder' ,
     function  ($scope, $rootScope, $modal, $compile, authService, masterDataService, allocationStrategyService, DTInstances, DTOptionsBuilder, DTColumnDefBuilder) {
        $scope.criteria = {
            toWhSysNo:  '' ,
            companySysNo:  ''
        };
        $scope.records = {};
        $scope.selectIdSet = {};
        $scope.allIds = [];
        $scope.allCheckItem =  false ;
        $scope.isDisabled =  true ;

         var  bInit =  true ;
         /**
          *   选中某一个
          */
        $scope.checkItem =  function  (sysNo) {
             if  ($scope[ &quot;checkItem&quot;  + sysNo])
                $scope.selectIdSet[sysNo] = -1;
             else
                 delete   $scope.selectIdSet[sysNo];
        };
         /**
          *   全部选中   或者   不选中
          */
        $scope.checkAll =  function  () {
             for  ( var  index  in  $scope.allIds)
                $scope[ &quot;checkItem&quot;  + $scope.allIds[index]] = $scope.allCheckItem;
             if  ($scope.allCheckItem) {
                 for  ( var  index  in  $scope.allIds)
                    $scope.selectIdSet[$scope.allIds[index]] = -1;
            }  else
                $scope.selectIdSet = {};
        };
         // 设置默认仓库
        $scope.whNo = authService.getUser().whNo;

         /**
          *   获取仓库列表
          */
        $scope.toWhOptions = [];
         if  ($scope.toWhOptions.length === 0) {
            masterDataService.getWhList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    reply.data.unshift({whNo: '' , whName: '--请选择--' });
                    $scope.toWhOptions = reply.data;
                }
            });
        }
         // $scope.changeToWh = function (toWh) {
         //     $scope.criteria.toWhSysNo = !(toWh.index) ? '' : $scope.toWhOptions[toWh.index].sysNo;
         // };
         /**
          *   获取货主列表
          */
        $scope.companyOptions = [];
         if  ($scope.companyOptions.length === 0) {
            masterDataService.getCompanyList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.companyOptions = reply.data;
                }
            });
        }
        $scope.changeCompany =  function  (company) {
            $scope.criteria.companySysNo = !(company.index) ?  ''  : $scope.companyOptions[company.index].sysNo;
        };


         /**
          *   构建checkbox列
          */
         function  actionCheckBox(data) {
             return   ' &lt;input ng-model=&quot;checkItem'  + data.sysNo +
                 '&quot; type=&quot;checkbox&quot; name=&quot;checkItem&quot; ng-change=&quot;checkItem(\''  + data.sysNo +
                 '\')&quot;/&gt;' ;
        }
         /**
          *   构建自定义列的生成
          */
         var  createOrderNoHtml =  function  (data) {
             return   '&lt;a href=&quot;&quot; ng-click=&quot;viewItem('  + data.sysNo +  ')&quot;&gt;'  + data.allocationStrategyNo +  '&lt;/a&gt;' ;
        };

         /**
          *   定义表格的所有列，将列与服务端返回的字段进行绑定
          */
        $scope.dtColumnDefs = [
            DTColumnDefBuilder.newColumnDef(0).withOption( 'data' ,  null ).renderWith(actionCheckBox).notSortable().withOption( 'width' ,  '5%' ),
            DTColumnDefBuilder.newColumnDef(1).withOption( 'data' ,  null ).renderWith(createOrderNoHtml).notSortable(),
            DTColumnDefBuilder.newColumnDef(2).withOption( 'data' ,  'allocationStrategyDesc' ).notSortable(),
            DTColumnDefBuilder.newColumnDef(3).withOption( 'data' ,  'whNo' ).notSortable(),
            DTColumnDefBuilder.newColumnDef(4).withOption( 'data' ,  'whName' ).notSortable(),
            DTColumnDefBuilder.newColumnDef(5).withOption( 'data' ,  'companyCode' ).notSortable(),
            DTColumnDefBuilder.newColumnDef(6).withOption( 'data' ,  'companyName' ).notSortable()
        ];
         /**
          *   创建单行
          */
         var  createdRow =  function  (row, data) {
            $scope.records[data[ 'sysNo' ]] = data;
            $compile(angular.element(row).contents())($scope);
        };
         /**
          *   点击超链接查看详情
          */
        $scope.viewItem =  function  (itemId) {
            allocationStrategyService.setAllocationStrategySysNo(itemId);
             var  modalInstance = $modal.open({
                templateUrl:  'views/strategy/allocation-strategy-modal.html' ,
                controller:  'allocationStrategyModalController' ,
                backdrop:  'static'
            });
             return  modalInstance.result.then( function  (reply) {
                 //alert(JSON.stringify(reply));
                $scope.dtInstance.rerender();
            });
        }
         /**
          *   根据搜索条件进行查询
          */
        $scope.search =  function  (criteria) {
            $scope.dtInstance.rerender();
        };

         /**
          *   新增分配策略
          */
        $scope.addAllocateStrategy =  function (){
             var  modalInstance = $modal.open({
                templateUrl:  'views/strategy/allocation-strategy-add.html' ,
                controller:  'allocateStrategyAddController' ,
                backdrop:  'static'
            });
             return  modalInstance.result.then( function  (reply) {
                $scope.dtInstance.rerender();
            });
        }

         /**
          *   修改分配策略
          */
        $scope.editAllocateStrategy =  function (){
             var  allocateidArr = [];
             for  ( var  index  in  $scope.allIds)
            {
                 if ($scope.selectIdSet[$scope.allIds[index]] == -1) {
                    allocateidArr.push($scope.records[$scope.allIds[index]].sysNo);
                }
            }
             if (allocateidArr.length != 1){
                alert( &quot;请选择一条分配策略&quot; )
            } else {
                allocationStrategyService.setSysNo(allocateidArr[0]);
                 var  modalInstance = $modal.open({
                    templateUrl:  'views/strategy/allocation-strategy-edit.html' ,
                    controller:  'allocateStrategyEditController' ,
                    backdrop:  'static'
                });
                 return  modalInstance.result.then( function  (reply) {
                    $scope.dtInstance.rerender();
                });
            }
        }
         /**
          *   DataTables   的后端分页设置
          */
        $scope.dtOptions = DTOptionsBuilder.newOptions().withBootstrap()
            .withOption( 'ajax' ,  function  (data, callback) {
                 if  (bInit) {
                    bInit =  false ;
                    $scope.records = {};
                    $scope.total = 0;
                     return  callback({data: [], recordsTotal: 0, recordsFiltered: 0});
                }
                 else
                {
                    initTable(data, callback);
                }
            }).withOption( 'bFilter' ,  false )
            .withOption( 'bLengthChange' ,  false )
            .withDataProp( 'data' )
            .withOption( 'displayLength' , 10)
            .withOption( 'serverSide' ,  true )
            .withPaginationType( 'full_numbers' )
            .withOption( 'createdRow' , createdRow)
            .withOption( 'order' , [])
            .withOption( 'autoWidth' ,  false )
            .withOption( 'scrollX' ,  '100%' );
         /**
          *   从服务端获取符合查询条件的列表
          */
         var  getAllocationStrategyList =  function  (draw, start, length) {
             return  allocationStrategyService.getAllocationStrategyList({
                draw: draw,
                start: start,
                rows: length,
                allocationStrategyDesc:$scope.allocationStrategyDesc,
                whNo: $scope.whNo,
                companySysNo:$scope.criteria.companySysNo
            });
        };


         /**
          *   初始化数据表
          */
         function  initTable(data, callback){
            $rootScope.loadingPromise = getAllocationStrategyList(data.draw, data.start,
                data.length).success( function  (res) {
                     for  ( var  index  in  $scope.allIds)
                         delete   $scope[ &quot;checkItem&quot;  + $scope.allIds[index]];
                    $scope.selectIdSet = {};
                    $scope.allIds = [];
                    $scope.allCheckItem =  false ;
                    $scope.records = {};
                    $scope.total = res.recordsTotal;
                     for  ( var  index  in  res.data)
                        $scope.allIds.push(res.data[index].sysNo);
                    callback(res);
                });
        }
         /**
          *   获得   dtInstance
          */
        DTInstances.getLast().then( function  (dtInstance) {
            $scope.dtInstance = dtInstance;
        });
    }]);   

</code></pre>

<h2 id="allocation-strategy-detail-add-controllerjs"><a name="user-content-allocation-strategy-detail-add-controllerjs" href="#allocation-strategy-detail-add-controllerjs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-detail-add-controller.js</h2>
<pre><code>/wms-web/src/main/webapp/js/controllers/strategy/allocation-strategy-detail-add-controller.js

wmsApp.controller( 'allocateStrategyDetailAddController' , [ '$scope' ,  '$rootScope' , '$modal' , '$compile' ,  '$modalInstance' ,  'masterDataService' , 'allocationStrategyService' ,  'DTOptionsBuilder' ,  'DTColumnDefBuilder' ,
     function  ($scope, $rootScope,$modal, $compile, $modalInstance, masterDataService, allocationStrategyService, DTOptionsBuilder, DTColumnDefBuilder) {
        $scope.criteria = {
            orderTypeValue:  '' ,
            orderTypeValueName:  '' ,
            ruleTimeValue:  '' ,
            ruleTimeValueName:  '' ,
            ruleSpaceValue:  '' ,
            ruleSpaceValueName:  '' ,
            pickLocDataFilterSysNo: '' ,
            repLocDataFilterSysNo:  ''

        };
         // 是否补货， 默认0
        $scope.isRep =  '0' ;
         /**
          *   获取出库类型列表
          */
        $scope.orderTypeOptions = [];
         if  ($scope.orderTypeOptions.length === 0) {
            masterDataService.getOrderTypeList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.orderTypeOptions = reply.data;
                }
            });
        }
        $scope.changeOrderType =  function  (orderType) {
            $scope.criteria.orderTypeValue = !(orderType.index) ?  ''  : $scope.orderTypeOptions[orderType.index].key;
            $scope.criteria.orderTypeValueName = !(orderType.index) ?  ''  : $scope.orderTypeOptions[orderType.index].value;
        };
         // 默认按时间规则定位
        $scope.rule = 0;
        $scope.isRuleTimeShow =  true ;
        $scope.isRuleSpaceShow =  false ;
         /**
          *   定位规则
          */
        $scope.ruleOptions = [];
         if  ($scope.ruleOptions.length === 0) {
            $scope.ruleOptions = [
                {key:0,value: '按时间定位规则' },
                {key:1,value: '按空间定位规则' }];
        }
        $scope.changeRule=  function  () {
             if  ($scope.rule == 0)
            {
                $scope.isRuleTimeShow =  true ;
                $scope.isRuleSpaceShow =  false ;
                $scope.criteria.ruleSpaceValue =  '' ;
                $scope.criteria.ruleSpaceValueName =  '' ;
            }
             else
            {
                $scope.isRuleTimeShow =  false ;
                $scope.isRuleSpaceShow =  true ;
                $scope.criteria.ruleTimeValue =  '' ;
                $scope.criteria.ruleTimeValueName =  '' ;
            }
        };
         /**
          *   获取时间定位规则列表
          */
        $scope.ruleTimeOptions = [];
         if  ($scope.ruleTimeOptions.length === 0) {
            masterDataService.getRuleTimeList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.ruleTimeOptions = reply.data;
                }
            });
        }
        $scope.changeRuleTime =  function  (ruleTime) {
            $scope.criteria.ruleTimeValue = !(ruleTime.index) ?  ''  : $scope.ruleTimeOptions[ruleTime.index].key;
            $scope.criteria.ruleTimeValueName = !(ruleTime.index) ?  ''  : $scope.ruleTimeOptions[ruleTime.index].value;
        };
         /**
          *   获取空间定位规则列表
          */
        $scope.ruleSpaceOptions = [];
         if  ($scope.ruleSpaceOptions.length === 0) {
            masterDataService.getRuleSpaceList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.ruleSpaceOptions = reply.data;
                }
            });
        }
        $scope.changeRuleSpace =  function  (ruleSpace) {
            $scope.criteria.ruleSpaceValue = !(ruleSpace.index) ?  ''  : $scope.ruleSpaceOptions[ruleSpace.index].key;
            $scope.criteria.ruleSpaceValueName = !(ruleSpace.index) ?  ''  : $scope.ruleSpaceOptions[ruleSpace.index].value;
        };

         /**
          *   获取拣货储位过滤规则筛选器列表
          */
        $scope.pickLocDataFilterOptions = [];
         if  ($scope.pickLocDataFilterOptions.length === 0) {
            masterDataService.getSysDataFilterList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.pickLocDataFilterOptions = reply.data;
                }
            });
        }
        $scope.changePickLocDataFilter =  function  (pickLocDataFilter) {
            $scope.criteria.pickLocDataFilterSysNo = !(pickLocDataFilter.index) ?  ''  : $scope.pickLocDataFilterOptions[pickLocDataFilter.index].sysNo;
            $scope.criteria.pickLocDataFilterNo = !(pickLocDataFilter.index) ?  ''  : $scope.pickLocDataFilterOptions[pickLocDataFilter.index].dataFilterNo;
            $scope.criteria.pickLocDataFilterDesc = !(pickLocDataFilter.index) ?  ''  : $scope.pickLocDataFilterOptions[pickLocDataFilter.index].dataFilterDesc;
        };

         /**
          *   获取补货储位过滤规则筛选器列表
          */
        $scope.repLocDataFilterOptions = [];
         if  ($scope.repLocDataFilterOptions.length === 0) {
            masterDataService.getSysDataFilterList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.repLocDataFilterOptions = reply.data;
                }
            });
        }
        $scope.changeRepLocDataFilter =  function  (repLocDataFilter) {
            $scope.criteria.repLocDataFilterSysNo = !(repLocDataFilter.index) ?  ''  : $scope.repLocDataFilterOptions[repLocDataFilter.index].sysNo;
            $scope.criteria.repLocDataFilterNo = !(repLocDataFilter.index) ?  ''  : $scope.repLocDataFilterOptions[repLocDataFilter.index].dataFilterNo;
            $scope.criteria.repLocDataFilterDesc = !(repLocDataFilter.index) ?  ''  : $scope.repLocDataFilterOptions[repLocDataFilter.index].dataFilterDesc;
        };

         /**
          *   保存
          */
        $scope.saveAllocateDetail =  function  () {
             if  ($scope.criteria.orderTypeValue ==  &quot;&quot; ) {
                alert( &quot;请选择出库类型&quot; )
                 return   false ;
            }
             if  ($scope. rule == 0 &amp;&amp; $scope.criteria.ruleTimeValue ==  &quot;&quot;  )
            {
                alert( &quot;请选择时间定位规则&quot; )
                 return   false ;
            }
             if  ($scope. rule == 1 &amp;&amp; $scope.criteria.ruleSpaceValue ==  &quot;&quot;  )
            {
                alert( &quot;请选择空间定位规则&quot; )
                 return   false ;
            }
             if  ($scope.criteria.pickLocDataFilterSysNo ==  &quot;&quot; )
            {
                alert( &quot;请选择拣货储位过滤规则&quot; )
                 return   false ;
            }

             if  ($scope.criteria.repLocDataFilterSysNo ==  &quot;&quot; )
            {
                alert( &quot;请选择补货储位过滤规则&quot; )
                 return   false ;
            }
            $modalInstance.close({
                    orderType:$scope.criteria.orderTypeValue, 
                    orderTypeName:$scope.criteria.orderTypeValueName, 
                    allocRuleTime: $scope.criteria.ruleTimeValue, 
                    allocRuleTimeName: $scope.criteria.ruleTimeValueName,
                    allocRuleSpace: $scope.criteria.ruleSpaceValue,
                    allocRuleSpaceName: $scope.criteria.ruleSpaceValueName,
                    pickLocDataFilterSysNo: $scope.criteria.pickLocDataFilterSysNo,
                    pickLocDataFilterNo: $scope.criteria.pickLocDataFilterNo,
                    pickLocDataFilterDesc: $scope.criteria.pickLocDataFilterDesc,
                    repLocDataFilterSysNo: $scope.criteria.repLocDataFilterSysNo,
                    repLocDataFilterNo: $scope.criteria.repLocDataFilterNo,
                    repLocDataFilterDesc: $scope.criteria.repLocDataFilterDesc,
                    isRep: $scope.isRep

//                    pickLocDataFilterSysNo: $scope.ecInvInfo.sysNo,
//                    pickLocDataFilterNo: $scope.ecInvInfo.dataFilterNo,
//                    pickLocDataFilterDesc: $scope.ecInvInfo.dataFilterDesc,
//                    repLocDataFilterSysNo: $scope.ecInvRepInfo.sysNo,
//                    repLocDataFilterNo: $scope.ecInvRepInfo.dataFilterNo,
//                    repLocDataFilterDesc: $scope.ecInvRepInfo.dataFilterDesc
                });
        };


         /**
          *   对话框关闭响应
          */
        $scope.close =  function  () {
//            $modalInstance.close('refresh');
            $modalInstance.dismiss( 'close' );
        };     }]);   

</code></pre>

<h2 id="allocation-strategy-detail-edit-controllerjs"><a name="user-content-allocation-strategy-detail-edit-controllerjs" href="#allocation-strategy-detail-edit-controllerjs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-detail-edit-controller.js</h2>
<pre><code>/wms-web/src/main/webapp/js/controllers/strategy/allocation-strategy-detail-edit-controller.js

wmsApp.controller( 'allocateStrategyDetailEditController' , [ '$scope' ,  '$rootScope' , '$modal' , '$compile' ,  '$modalInstance' ,  'masterDataService' , 'allocationStrategyService' ,  'DTOptionsBuilder' ,  'DTColumnDefBuilder' ,
     function  ($scope, $rootScope,$modal, $compile, $modalInstance, masterDataService, allocationStrategyService, DTOptionsBuilder, DTColumnDefBuilder) {
        $scope.criteria = {
            orderTypeValue:  '' ,
            orderTypeValueName:  '' ,
            ruleTimeValue:  '' ,
            ruleTimeValueName:  '' ,
            ruleSpaceValue:  '' ,
            ruleSpaceValueName:  '' ,
            pickLocDataFilterSysNoValue :  '' ,
            repLocDataFilterSysNoValue:  ''
        };
         /**
          *   获取出库类型列表
          */
        $scope.orderTypeOptions = [];
         if  ($scope.orderTypeOptions.length === 0) {
            masterDataService.getOrderTypeList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.orderTypeOptions = reply.data;
                }
            });
        }
        $scope.changeOrderType =  function  (orderType) {
            $scope.criteria.orderTypeValue = $scope.orderType;
            $scope.criteria.orderTypeValueName = !$( &quot;#orderType option:selected&quot; ).val() ?  ''  : $( &quot;#orderType option:selected&quot; ).text();

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.pickLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.pickLocInfo = resp.data;
                }
            });

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.repLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.repLocInfo = resp.data;
                }
            });
        };
         /**
          *   定位规则
          */
        $scope.ruleOptions = [];
         if  ($scope.ruleOptions.length === 0) {
            $scope.ruleOptions = [
                {key:0,value: '按时间定位规则' },
                {key:1,value: '按空间定位规则' }];
        }
        $scope.changeRule=  function  () {
             if  ($scope.rule == 0)
            {
                $scope.isRuleTimeShow =  true ;
                $scope.isRuleSpaceShow =  false ;
                $scope.allocRuleSpace =  '' ;
                $scope.criteria.ruleSpaceValue =  '' ;
                $scope.criteria.ruleSpaceValueName =  '' ;
            }
             else
            {
                $scope.isRuleTimeShow =  false ;
                $scope.isRuleSpaceShow =  true ;
                $scope.allocRuleTime =  '' ;
                $scope.criteria.ruleTimeValue =  '' ;
                $scope.criteria.ruleTimeValueName =  '' ;
            }
        };

         /**
          *   获取时间定位规则列表
          */
        $scope.ruleTimeOptions = [];
         if  ($scope.ruleTimeOptions.length === 0) {
            masterDataService.getRuleTimeList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.ruleTimeOptions = reply.data;
                }
            });
        }
        $scope.changeRuleTime =  function  (ruleTime) {
            $scope.criteria.ruleSpaceValue =  '' ;
            $scope.criteria.ruleSpaceValueName =  '' ;
             if  ( null  == $scope.allocRuleTime)
            {
                $scope.criteria.ruleTimeValue =  '' ;
            }
             else
            {
                $scope.criteria.ruleTimeValue = $scope.allocRuleTime;
            }
            $scope.criteria.ruleTimeValueName = !$( &quot;#ruleTime option:selected&quot; ).val() ?  ''  : $( &quot;#ruleTime option:selected&quot; ).text();

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.pickLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.pickLocInfo = resp.data;
                }
            });

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.repLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.repLocInfo = resp.data;
                }
            });
        };
         /**
          *   获取空间定位规则列表
          */
        $scope.ruleSpaceOptions = [];
         if  ($scope.ruleSpaceOptions.length === 0) {
            masterDataService.getRuleSpaceList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.ruleSpaceOptions = reply.data;
                }
            });
        }
        $scope.changeRuleSpace =  function  (ruleSpace) {
            $scope.criteria.ruleTimeValue =  '' ;
            $scope.criteria.ruleTimeValueName =  '' ;
             if  ( null  == $scope.allocRuleSpace)
            {
                $scope.criteria.ruleSpaceValue =  '' ;
            }
             else
            {
                $scope.criteria.ruleSpaceValue = $scope.allocRuleSpace;
            }
            $scope.criteria.ruleSpaceValueName = !$( &quot;#ruleSpace option:selected&quot; ).val() ?  ''  : $( &quot;#ruleSpace option:selected&quot; ).text();

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.pickLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.pickLocInfo = resp.data;
                }
            });

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.repLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.repLocInfo = resp.data;
                }
            });
        };

         /**
          *   获取拣货储位过滤规则筛选器列表
          */
        $scope.pickLocDataFilterOptions = [];
         if  ($scope.pickLocDataFilterOptions.length === 0) {
            masterDataService.getSysDataFilterList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.pickLocDataFilterOptions = reply.data;
                }
            });
        }
        $scope.changePickLocDataFilter =  function  (pickLocDataFilter) {
            $scope.criteria.pickLocDataFilterSysNoValue = $scope.pickLocDataFilterSysNo;
            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.pickLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.pickLocInfo = resp.data;
                }
            });

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.repLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.repLocInfo = resp.data;
                }
            });

        };

         /**
          *   获取补货储位过滤规则筛选器列表
          */
        $scope.repLocDataFilterOptions = [];
         if  ($scope.repLocDataFilterOptions.length === 0) {
            masterDataService.getSysDataFilterList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.repLocDataFilterOptions = reply.data;
                }
            });
        }
        $scope.changeRepLocDataFilter =  function  (repLocDataFilter) {
            $scope.criteria.repLocDataFilterSysNoValue = $scope.repLocDataFilterSysNo;
            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.repLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.repLocInfo = resp.data;
                }
            });

            allocationStrategyService.getSysDataFilterInfo({
                sysNo: $scope.criteria.pickLocDataFilterSysNoValue
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.pickLocInfo = resp.data;
                }
            });
        };



        $scope.orderType = allocationStrategyService.getOrderType().toString();
         if  (allocationStrategyService.getAllocRuleTime() !=  null  &amp;&amp; allocationStrategyService.getAllocRuleTime() !=  &quot;&quot; )
        {
            $scope.allocRuleTime = allocationStrategyService.getAllocRuleTime().toString();
        }
         if  (allocationStrategyService.getAllocRuleSpace() !=  null  &amp;&amp; allocationStrategyService.getAllocRuleSpace() !=  &quot;&quot; )
        {
            $scope.allocRuleSpace = allocationStrategyService.getAllocRuleSpace().toString();
        }
        $scope.pickLocDataFilterSysNo = allocationStrategyService.getPickLocDataFilterSysNo();
        $scope.repLocDataFilterSysNo = allocationStrategyService.getRepLocDataFilterSysNo();

        $scope.criteria.orderTypeValue = allocationStrategyService.getOrderType().toString();
         if  (allocationStrategyService.getAllocRuleTime() !=  null  &amp;&amp; allocationStrategyService.getAllocRuleTime() !=  &quot;&quot; )
        {
            $scope.criteria.ruleTimeValue = allocationStrategyService.getAllocRuleTime().toString();
            $scope.rule = 0;
            $scope.isRuleTimeShow =  true ;
            $scope.isRuleSpaceShow =  false ;
        }
         if  (allocationStrategyService.getAllocRuleSpace() !=  null  &amp;&amp; allocationStrategyService.getAllocRuleSpace() !=  &quot;&quot; )
        {
            $scope.criteria.ruleSpaceValue = allocationStrategyService.getAllocRuleSpace().toString();
            $scope.rule = 1;
            $scope.isRuleTimeShow =  false ;
            $scope.isRuleSpaceShow =  true ;
        }
        $scope.criteria.pickLocDataFilterSysNoValue = allocationStrategyService.getPickLocDataFilterSysNo();
        $scope.criteria.repLocDataFilterSysNoValue = allocationStrategyService.getRepLocDataFilterSysNo();
        $scope.isRep = allocationStrategyService.getIsRep();
        allocationStrategyService.getSysDataFilterInfo({
            sysNo: $scope.criteria.pickLocDataFilterSysNoValue
        }).success( function  (resp) {
             if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                $scope.pickLocInfo = resp.data;
            }
        });

        allocationStrategyService.getSysDataFilterInfo({
            sysNo: $scope.criteria.repLocDataFilterSysNoValue
        }).success( function  (resp) {
             if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                $scope.repLocInfo = resp.data;
            }
        });

         /**
          *   保存
          */
        $scope.saveAllocateDetail =  function  () {
             if  ($scope.criteria.orderTypeValue ==  &quot;&quot;  || $scope.criteria.orderTypeValue ==  null ) {
                alert( &quot;请选择出库类型&quot; )
                 return   false ;
            }
             if  ($scope. rule == 0 &amp;&amp; $scope.criteria.ruleTimeValue ==  &quot;&quot;  )
            {
                alert( &quot;请选择时间定位规则&quot; )
                 return   false ;
            }
             if  ($scope. rule == 1 &amp;&amp; $scope.criteria.ruleSpaceValue ==  &quot;&quot;  )
            {
                alert( &quot;请选择空间定位规则&quot; )
                 return   false ;
            }

             if  ($scope.criteria.pickLocDataFilterSysNoValue ==  &quot;&quot;  || $scope.criteria.pickLocDataFilterSysNoValue ==  null ){
                alert( &quot;请选择拣货储位过滤规则&quot; )
                 return   false ;
            }

             if  ($scope.criteria.repLocDataFilterSysNoValue ==  &quot;&quot;  || $scope.criteria.repLocDataFilterSysNoValue ==  null ){
                alert( &quot;请选择补货储位过滤规则&quot; )
                 return   false ;
            }

             if  ($scope.criteria.orderTypeValueName ==  &quot;&quot; )
            {
                $scope.criteria.orderTypeValueName = $( &quot;#orderType option:selected&quot; ).text();
            }
             if  ($scope.criteria.ruleTimeValueName ==  &quot;&quot;  &amp;&amp; $scope.criteria.ruleTimeValue !=  &quot;&quot; )
            {
                $scope.criteria.ruleTimeValueName = $( &quot;#ruleTime option:selected&quot; ).text();
            }
             if  ($scope.criteria.ruleSpaceValueName ==  &quot;&quot;  &amp;&amp; $scope.criteria.ruleSpaceValue != &quot;&quot; )
            {
                $scope.criteria.ruleSpaceValueName = $( &quot;#ruleSpace option:selected&quot; ).text();
            }
            $modalInstance.close({
                    orderType:$scope.criteria.orderTypeValue, 
                    orderTypeName:$scope.criteria.orderTypeValueName, 
                    allocRuleTime: $scope.criteria.ruleTimeValue, 
                    allocRuleTimeName: $scope.criteria.ruleTimeValueName,
                    allocRuleSpace: $scope.criteria.ruleSpaceValue,
                    allocRuleSpaceName: $scope.criteria.ruleSpaceValueName,
                    pickLocDataFilterSysNo: $scope.criteria.pickLocDataFilterSysNoValue,
                    pickLocDataFilterNo: $scope.pickLocInfo.dataFilterNo,
                    pickLocDataFilterDesc: $scope.pickLocInfo.dataFilterDesc,
                    repLocDataFilterSysNo: $scope.criteria.repLocDataFilterSysNoValue,
                    repLocDataFilterNo: $scope.repLocInfo.dataFilterNo,
                    repLocDataFilterDesc: $scope.repLocInfo.dataFilterDesc,
                    isRep: $scope.isRep

                });
        };
         /**
          *   对话框关闭响应
          */
        $scope.close =  function  () {
            $modalInstance.dismiss( 'close' );
        };     }]);   

</code></pre>

<h2 id="allocation-strategy-edit-controllerjs"><a name="user-content-allocation-strategy-edit-controllerjs" href="#allocation-strategy-edit-controllerjs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-edit-controller.js</h2>
<pre><code>/wms-web/src/main/webapp/js/controllers/strategy/allocation-strategy-edit-controller.js

wmsApp.controller( 'allocateStrategyEditController' , [ '$scope' ,  '$rootScope' , '$modal' , '$compile' ,  '$modalInstance' ,  'masterDataService' , 'allocationStrategyService' ,  'DTInstances' ,  'DTOptionsBuilder' ,  'DTColumnDefBuilder' ,
     function  ($scope, $rootScope,$modal, $compile, $modalInstance, masterDataService, allocationStrategyService, DTInstances, DTOptionsBuilder, DTColumnDefBuilder) {
        $scope.criteria = {
            toWhSysNo:  '' ,
            companySysNo:  ''
        };
        $scope.isDisabled =  true ;
        $scope.selectIdSet = {};
        $scope.allIds = [];
        $scope.allCheckItem =  false ;
         /**
          *   选中某一个
          */
        $scope.checkItemfrom =  function  (sysNo) {
             if ($scope.selectIdSet[sysNo] == -1){
                 delete   $scope.selectIdSet[sysNo];
            } else {
                $scope.selectIdSet[sysNo] = -1;
            }
        };

         /**
          *   提交到后台的bean对象
          */
        $scope.allocStrategyBean = {
            sysNo:  '' ,
            allocationStrategyDesc :  '' ,
            whSysNo:  '' ,
            companySysNo:  '' ,
            list:[]
        };
         /**
          *   获取仓库列表
          */
        $scope.toWhOptions = [];
         if  ($scope.toWhOptions.length === 0) {
            masterDataService.getWhList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.toWhOptions = reply.data;
                }
            });
        }
        $scope.changeToWh =  function  (toWh) {
            $scope.criteria.toWhSysNo = !$( &quot;#toWh option:selected&quot; ).val() ?  ''  : $( &quot;#toWh option:selected&quot; ).val();
        };
         /**
          *   获取货主列表
          */
        $scope.companyOptions = [];
         if  ($scope.companyOptions.length === 0) {
            masterDataService.getCompanyList().success( function  (reply) {
                 if  (reply &amp;&amp; reply.resultCode ===  &quot;1&quot;  &amp;&amp; reply.data) {
                    $scope.companyOptions = reply.data;
                }
            });
        }

        $scope.changeCompany =  function  (company) {
            $scope.criteria.companySysNo = !$( &quot;#company option:selected&quot; ).val() ?  ''  : $( &quot;#company option:selected&quot; ).val();
        };

         /**
          *   定义表格的所有列
          */
        $scope.dtColumnDefs = [DTColumnDefBuilder.newColumnDef(0).notSortable(),
            DTColumnDefBuilder.newColumnDef(1).notSortable(),
            DTColumnDefBuilder.newColumnDef(2).notSortable(),
            DTColumnDefBuilder.newColumnDef(3).notSortable(),
            DTColumnDefBuilder.newColumnDef(4).notSortable(),
            DTColumnDefBuilder.newColumnDef(5).notSortable(),
            DTColumnDefBuilder.newColumnDef(6).notSortable(),
            DTColumnDefBuilder.newColumnDef(7).notSortable(),
            DTColumnDefBuilder.newColumnDef(8).notSortable(),
            DTColumnDefBuilder.newColumnDef(9).notSortable(),
            DTColumnDefBuilder.newColumnDef(10).notSortable(),
            DTColumnDefBuilder.newColumnDef(11).notSortable()];

         /**
          *   DataTables   的前端分页设置
          */
        $scope.dtOptions = DTOptionsBuilder.newOptions().withBootstrap()
            .withOption( 'order' , [])
            .withOption( 'bFilter' ,  false )
            .withOption( 'bLengthChange' ,  false )
            .withOption( 'displayLength' , 5)
            .withOption( 'autoWidth' ,  false )
            .withOption( 'scrollX' ,  '100%' );
         /**
          *   根据sysNo查找出对应的分配策略信息
          */
        $scope.searchAllocationStrategy =  function (){
            $rootScope.loadingPromise = allocationStrategyService.getAllocationStrategyInfo({
                id: allocationStrategyService.getSysNo()
            }).success( function  (resp) {
                 if  (resp &amp;&amp; (resp.resultCode ===  '1' )) {
                    $scope.allocationStrategyObj = resp.data;
                    $scope.whNo = $scope.allocationStrategyObj.whNo;
                    $scope.allocationStrategyDesc = $scope.allocationStrategyObj.allocationStrategyDesc;
                    $scope.companySysNo = parseInt(resp.data.companySysNo);
                     // 存放至提交到后台的bean对象中
                    $scope.allocStrategyBean.list = $scope.allocationStrategyObj.list;
                     // 将行号放置allIds中，供修改时使用
                     for ( var  i=0;i&lt;$scope.allocationStrategyObj.list.length;i++)
                    {
                        $scope.allIds.push($scope.allocationStrategyObj.list[i].allocationDetailNo);
                    }
                }  else
                    alert(resp.resultMsg ? resp.resultMsg :  '未能成功获取分配策略信息' );
            },  function  (err) {
                alert( '获取分配策略信息失败' );
            });
        }

        $scope.searchAllocationStrategy();
         /**
          *   保存
          */
        $scope.updateAllocate =  function  () {
             if  ($scope.whNo ==  &quot;&quot; ) {
                alert( &quot;请选择仓库&quot; )
                 return   false ;
            }
             if  ($scope.companySysNo ==  &quot;&quot; ) {
                alert( &quot;请选择货主&quot; )
                 return   false ;
            }
             if  ($scope.allocationStrategyDesc ==  &quot;&quot; ){
                alert( &quot;请输入描述&quot; )
                 return   false ;
            }

            $scope.allocStrategyBean.sysNo = allocationStrategyService.getSysNo();
            $scope.allocStrategyBean.allocationStrategyDesc = $scope.allocationStrategyDesc;
            $scope.allocStrategyBean.whNo = $scope.whNo;
            $scope.allocStrategyBean.companySysNo = $scope.companySysNo
            $rootScope.loadingPromise = updateAllocate($scope.allocStrategyBean).success( function  (res) {
                 if (res.resultCode ==  &quot;0&quot; ){
                    alert(res.resultMsg);
                } else {
                    alert( &quot;修改成功!&quot; );
                    $modalInstance.close(1);
                }
            });

        };
         var  updateAllocate =  function (allocStrategyBean){
             return  allocationStrategyService.updateAllocate(allocStrategyBean)
        };

         /**
          *   新增分配策略明细
          */
        $scope.addAllocateStrategyDetail =  function (){
             var  modalInstance = $modal.open({
                templateUrl:  'views/strategy/allocation-strategy-detail-add.html' ,
                controller:  'allocateStrategyDetailAddController' ,
                backdrop:  'static'
            });
             return  modalInstance.result.then( function  (reply) {
                  reply.allocationDetailNo = $scope.allocStrategyBean.list.length + 1;
                  $scope.allIds.push(reply.allocationDetailNo);
                  $scope.allocStrategyBean.list.push(reply);
            });
        }

         /**
          *   修改分配策略明细
          */
        $scope.editAllocateStrategyDetail =  function (){
             var  allocateidArr = [];
             for  ( var  index  in  $scope.allIds)
            {
                 if ($scope.selectIdSet[$scope.allIds[index]] == -1) {
                    allocateidArr.push($scope.allocStrategyBean.list[parseInt($scope.allIds[index]) -1].allocationDetailNo);
                }
            }
             if (allocateidArr.length != 1){
                alert( &quot;请选择一条分配策略明细&quot; )
            } else {
                allocationStrategyService.setOrderType($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].orderType);
                allocationStrategyService.setAllocRuleTime($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleTime);
                allocationStrategyService.setAllocRuleSpace($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleSpace);
                allocationStrategyService.setPickLocDataFilterSysNo($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterSysNo);
                allocationStrategyService.setRepLocDataFilterSysNo($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterSysNo);
                allocationStrategyService.setIsRep($scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].isRep);
                 var  modalInstance = $modal.open({
                    templateUrl:  'views/strategy/allocation-strategy-detail-edit.html' ,
                    controller:  'allocateStrategyDetailEditController' ,
                    backdrop:  'static'
                });
                 return  modalInstance.result.then( function  (reply) {
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].orderType = reply.orderType;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].orderTypeName = reply.orderTypeName;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleTime = reply.allocRuleTime;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleTimeName = reply.allocRuleTimeName;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleSpace = reply.allocRuleSpace;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].allocRuleSpaceName = reply.allocRuleSpaceName;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterSysNo = reply.pickLocDataFilterSysNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterNo = reply.pickLocDataFilterNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].pickLocDataFilterDesc = reply.pickLocDataFilterDesc;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterSysNo = reply.repLocDataFilterSysNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterNo = reply.repLocDataFilterNo;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].repLocDataFilterDesc = reply.repLocDataFilterDesc;
                    $scope.allocStrategyBean.list[parseInt(allocateidArr[0]) -1].isRep = reply.isRep;

                     // 清空勾选项
                    $scope.checkItemfrom(allocateidArr[0]);
                    $scope.dtInstance.rerender();
                });
            }
        }
         /**
          *   对话框关闭响应
          */
        $scope.close =  function  () {
            $modalInstance.close( 'refresh' );
            $modalInstance.dismiss( 'close' );
        };

         /**
          *   获得   dtInstance
          */
        DTInstances.getLast().then( function  (dtInstance) {
            $scope.dtInstance = dtInstance;
        });     }]);   

</code></pre>

<h2 id="allocation-strategy-servicejs"><a name="user-content-allocation-strategy-servicejs" href="#allocation-strategy-servicejs" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-service.js</h2>
<pre><code>/wms-web/src/main/webapp/js/services/strategy/allocation-strategy-service.js

/**
  *   Desc:      分配策略服务
  */
wmsApp.factory( 'allocationStrategyService' , [ 'restProxyService' ,  'WMS_API_PROVIDER' ,  'WMS_API_END_POINT' ,
     function  (restProxyService, WMS_API_PROVIDER, WMS_API_END_POINT) {
         /**
          *   共享变量
          */
         var  allocationStrategySysNo;

         /**
          *   共享变量
          */
         var  sysNo;

         /**
          *   出库类型
          */
         var  orderType;

         /**
          *   时间定位规则信息
          */
         var  allocRuleTime;

         /**
          *   空间定位规则
          */
         var  allocRuleSpace;

         /**
          *   拣货储位过滤规则
          */
         var  pickLocDataFilterSysNo;

         /**
          *   补货储位过滤规则
          */
         var  repLocDataFilterSysNo;
         /**
          *   是否补货
          */
         var  isRep;

         /**
          *   函数列表
          */
         return  {
            getAllocationStrategyList:  function  (params) {
                 return  restProxyService.sendHttpGet(WMS_API_PROVIDER, WMS_API_END_POINT +  '/mst-allocation-strategy/list' , params);
            },
            getAllocationStrategyInfo:  function  (params) {
                 return  restProxyService.sendHttpGet(WMS_API_PROVIDER, WMS_API_END_POINT +  '/mst-allocation-strategy/info' , params);
            },
            startAllocate:  function  (params) {
                 return  restProxyService.sendHttpPost(WMS_API_PROVIDER, WMS_API_END_POINT +  '/mst-allocation-strategy/create' , params);
            },
            updateAllocate:  function  (params) {
                 return  restProxyService.sendHttpPost(WMS_API_PROVIDER, WMS_API_END_POINT +  '/mst-allocation-strategy/update' , params);
            },
            getSysDataFilterInfo:  function  (params) {
                 return  restProxyService.sendHttpGet(WMS_API_PROVIDER, WMS_API_END_POINT +  '/mst-allocation-strategy/getDataFilterInfo' , params);
            },
             /**
              *   Getter   &amp;   Setter   函数
              */
            getAllocationStrategySysNo:  function  () {
                 return  allocationStrategySysNo;
            },
            setAllocationStrategySysNo:  function  (aSysNo) {
                allocationStrategySysNo = aSysNo;
            },

             /**
              *   Getter   &amp;   Setter   函数
              */
            getSysNo:  function  () {
                 return  sysNo;
            },
            setSysNo:  function  (aSysNo) {
                sysNo = aSysNo;
            },
             /**
              *   Getter   &amp;   Setter   函数
              */
            getOrderType:  function  () {
                 return  orderType;
            },
            setOrderType:  function  (aOrderType) {
                orderType = aOrderType;
            },
             /**
              *   Getter   &amp;   Setter   函数
              */
            getAllocRuleTime:  function  () {
                 return  allocRuleTime;
            },
            setAllocRuleTime:  function  (aAllocRuleTime) {
                allocRuleTime = aAllocRuleTime;
            },
             /**
              *   Getter   &amp;   Setter   函数
              */
            getAllocRuleSpace:  function  () {
                 return  allocRuleSpace;
            },
            setAllocRuleSpace:  function  (aAllocRuleSpace) {
                allocRuleSpace = aAllocRuleSpace;
            },

             /**
              *   Getter   &amp;   Setter   函数
              */
            getPickLocDataFilterSysNo:  function  () {
                 return  pickLocDataFilterSysNo;
            },
            setPickLocDataFilterSysNo:  function  (aPickLocDataFilterSysNo) {
                pickLocDataFilterSysNo = aPickLocDataFilterSysNo;
            },

             /**
              *   Getter   &amp;   Setter   函数
              */
            getRepLocDataFilterSysNo:  function  () {
                 return  repLocDataFilterSysNo;
            },
            setRepLocDataFilterSysNo:  function  (aRepLocDataFilterSysNo) {
                repLocDataFilterSysNo = aRepLocDataFilterSysNo;
            },
             /**
              *   Getter   &amp;   Setter   函数
              */
            getIsRep:  function  () {
                 return  isRep;
            },
            setIsRep:  function  (aIsrep) {
                isRep = aIsrep;
            }
        }
    } ]);   

</code></pre>

<h2 id="allocation-strategyhtml"><a name="user-content-allocation-strategyhtml" href="#allocation-strategyhtml" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy.html</h2>
<pre><code>/wms-web/src/main/webapp/views/strategy/allocation-strategy.html

&lt;div id=&quot;content-header&quot;&gt;
    &lt;h1&gt;分配策略查询&lt;/h1&gt;
&lt;/div&gt;
&lt;form class=&quot;form-horizontal form-bordered&quot; role=&quot;form&quot;&gt;
    &lt;div class=&quot;form-body&quot;&gt;
        &lt;!--&lt;div class=&quot;form-inline col-md-12&quot;&gt;--&gt;
        &lt;div class=&quot;row&quot;&gt;
            &lt;div class=&quot;col-md-4&quot;&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label class=&quot;control-label col-md-4&quot;&gt;描述：&lt;/label&gt;
                    &lt;div class=&quot;col-md-8&quot;&gt;
                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; maxlength=&quot;32&quot; autocomplete=&quot;off&quot; ng-model=&quot;allocationStrategyDesc&quot;&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;col-md-4&quot;&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label class=&quot;control-label col-md-4&quot;&gt;仓库名称：&lt;/label&gt;
                    &lt;div class=&quot;col-md-8&quot;&gt;
                        &lt; select class=&quot;form-control&quot; id=&quot;whSysNo&quot; name=&quot;toWhSysNo&quot; ng-model=&quot;whNo&quot;   ng - options =&quot;s. whNo  as s.whName for s in toWhOptions&quot; ng- disabled =&quot; isDisabled &quot;&gt;
                        &lt;/select&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;col-md-4&quot;&gt;
                &lt;div class=&quot;form-group&quot;&gt;
                    &lt;label class=&quot;control-label col-md-4&quot;&gt;货主名称：&lt;/label&gt;
                    &lt;div class=&quot;col-md-8&quot;&gt;
                        &lt;select class=&quot;form-control&quot; id=&quot;company&quot; data-ng-model=&quot;company.index&quot;
                               ng-change=&quot;changeCompany(company)&quot;&gt;
                               &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                               &lt;option ng-repeat=&quot;company in companyOptions&quot; ng-value=&quot;$index&quot;&gt;{{company.companyName}}&lt;/option&gt;
                        &lt;/select&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!--&lt;/div&gt;--&gt;
        &lt;div class=&quot;form-inline col-md-12&quot;&gt;
            &lt;div class=&quot;control-group pull-right&quot;&gt;
                &lt;input type=&quot;button&quot; value=&quot;查询&quot; class=&quot;btn btn-success&quot; ng-click=&quot;search(criteria)&quot;&gt;
                &lt;input type=&quot;button&quot; value=&quot;新增&quot; class=&quot;btn btn-primary&quot; ng-click=&quot;addAllocateStrategy()&quot;&gt;
                &lt;input type=&quot;button&quot; value=&quot;编辑&quot; class=&quot;btn btn-warning&quot; id=&quot;editBtn&quot; ng-click=&quot;editAllocateStrategy()&quot;&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;control-group col-md-12 &quot;&gt;
        &lt;table datatable=&quot;ng&quot; dt-options=&quot;dtOptions&quot; dt-instance=&quot;dtInstance&quot; dt-columns=&quot;dtColumns&quot;
               dt-column-defs=&quot;dtColumnDefs&quot; class=&quot;table table-striped table-bordered table-hover&quot;&gt;
            &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt; &lt;input type=&quot;checkbox&quot; id=&quot;checkItemAll&quot; ng-model=&quot;allCheckItem&quot; ng-change=&quot;checkAll()&quot;/&gt;&lt;/th&gt;
                &lt;th&gt;定位策略编码&lt;/th&gt;
                &lt;th&gt;描述&lt;/th&gt;
                &lt;th&gt;仓库编码&lt;/th&gt;
                &lt;th&gt;仓库名称&lt;/th&gt;
                &lt;th&gt;货主编号&lt;/th&gt;
                &lt;th&gt;货主名称&lt;/th&gt;
            &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
            &lt;tr ng-repeat=&quot;item in items&quot;&gt;
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/div&gt;
    &lt;table class=&quot;pull-right&quot;&gt;
        &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;
                &lt;div&gt;&lt;span&gt;总计{{total ? total : 0}}条&lt;/span&gt;&lt;/div&gt;
            &lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
    &lt;/table&gt; &lt;/form&gt;   

</code></pre>

<h2 id="allocation-strategy-addhtml"><a name="user-content-allocation-strategy-addhtml" href="#allocation-strategy-addhtml" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-add.html</h2>
<pre><code>/wms-web/src/main/webapp/views/strategy/allocation-strategy-add.html

&lt;div class=&quot;&quot;&gt;
    &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;close&quot; ng-click=&quot;close()&quot;&gt;×&lt;/button&gt;
            &lt;h4 class=&quot;modal-title&quot;&gt;新增分配策略&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;!-- Row 1 --&gt;
            &lt;div class=&quot;form-inline col-md-12&quot;&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;仓库：&lt;/div&gt;
                     &lt; select class=&quot;form-control&quot; id=&quot;whSysNo&quot; name=&quot;toWhSysNo&quot; ng-model=&quot;whNo&quot;   ng - options =&quot;s. whNo  as s.whName for s in toWhOptions&quot; ng- disabled =&quot; isDisabled &quot;&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;货主：&lt;/div&gt;
                    &lt;select class=&quot;form-control&quot; id=&quot;company&quot; data-ng-model=&quot;company.index&quot;
                           ng-change=&quot;changeCompany(company)&quot;&gt;
                       &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                       &lt;option ng-repeat=&quot;company in companyOptions&quot; ng-value=&quot;$index&quot;&gt;{{company.companyName}}&lt;/option&gt;
                   &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;描述：&lt;/div&gt;
                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; maxlength=&quot;32&quot; autocomplete=&quot;off&quot; ng-model=&quot;allocationStrategyDesc&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
            &lt;!-- Row 2 --&gt;
            &lt;div class=&quot;form-inline col-md-12 pull-right&quot;&gt;
                &lt;div class=&quot;control-group pull-right&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;保存&quot; class=&quot;btn btn-success&quot; ng-click=&quot;startAllocate()&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
            &lt;!-- Row 3 --&gt;
            &lt;div class=&quot;form-inline col-md-12 pull-right&quot;&gt;
                &lt;div class=&quot;control-group pull-right&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;新增&quot; class=&quot;btn btn-primary&quot; ng-click=&quot;addAllocateStrategyDetail()&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;编辑&quot; class=&quot;btn btn-warning&quot; id=&quot;editBtn&quot; ng-click=&quot;editAllocateStrategyDetail()&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-inline col-md-12&quot;&gt;
                &lt;table datatable=&quot;ng&quot; dt-options=&quot;dtOptions&quot;
                       dt-columns=&quot;dtColumnDefs&quot; class=&quot;table table-bordered table-hover&quot;&gt;
                    &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th width=&quot;5%&quot;&gt;&lt;/th&gt;
                        &lt;th&gt;行号&lt;/th&gt;
                        &lt;th&gt;出库类型&lt;/th&gt;
                        &lt;th&gt;时间分配规则&lt;/th&gt;
                        &lt;th&gt;空间分配规则&lt;/th&gt;
                        &lt;th&gt;分配规则优先级&lt;/th&gt;
                        &lt;th&gt;拣货储位过滤规则内部主键&lt;/th&gt;
                        &lt;th&gt;拣货储位过滤规则编码&lt;/th&gt;
                        &lt;th&gt;拣货储位过滤规则描述&lt;/th&gt;
                        &lt;th&gt;补货储位过滤规则内部主键&lt;/th&gt;
                        &lt;th&gt;补货储位过滤规则编码&lt;/th&gt;
                        &lt;th&gt;补货储位过滤规则描述&lt;/th&gt;
                    &lt;/tr&gt;
                    &lt;/thead&gt;
                    &lt;tbody&gt;
                    &lt;tr ng-repeat=&quot;allocationStrategyDetail in allocStrategyBean.list&quot;&gt;
                        &lt;td&gt;&lt;input ng-model=&quot;checkItem&quot; type=&quot;checkbox&quot; name=&quot;checkItem&quot; ng-change=&quot;checkItemfrom({{ allocationStrategyDetail.allocationDetailNo }})&quot;/&gt;&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocationDetailNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.orderTypeName }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocRuleTimeName }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocRuleSpaceName }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocRuleSeq }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.pickLocDataFilterSysNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.pickLocDataFilterNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.pickLocDataFilterDesc }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.repLocDataFilterSysNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.repLocDataFilterNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.repLocDataFilterDesc }}&lt;/td&gt;
                    &lt;/tr&gt;

                    &lt;/tbody&gt;
                &lt;/table&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    &lt;/div&gt; &lt;/div&gt;   

</code></pre>

<h2 id="allocation-strategy-detail-addhtml"><a name="user-content-allocation-strategy-detail-addhtml" href="#allocation-strategy-detail-addhtml" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-detail-add.html</h2>
<pre><code>/wms-web/src/main/webapp/views/strategy/allocation-strategy-detail-add.html

&lt;div class=&quot;&quot;&gt;
    &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;close&quot; ng-click=&quot;close()&quot;&gt;×&lt;/button&gt;
            &lt;h4 class=&quot;modal-title&quot;&gt;新增分配策略明细&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot; style=&quot;height: 200px;&quot;&gt;
            &lt;!-- Row 1 --&gt;
            &lt;div class=&quot;form-inline col-md-12&quot;&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;出库类型：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;orderType&quot; data-ng-model=&quot;orderType.index&quot;
                                        ng-change=&quot;changeOrderType(orderType)&quot;&gt;
                         &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                         &lt;option ng-repeat=&quot;orderType in orderTypeOptions&quot; ng-value=&quot;$index&quot;&gt;{{orderType.value}}&lt;/option&gt;
                     &lt;/select&gt;
                   &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;定位规则：&lt;/div&gt;
                    &lt;select class=&quot;form-control&quot; id=&quot;rule&quot; ng-model=&quot;rule&quot; ng-options=&quot;item.key as item.value for item in ruleOptions&quot;
                            ng-change=&quot;changeRule()&quot;&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;  ng-show=&quot;isRuleTimeShow&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;时间定位规则：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;ruleTime&quot; data-ng-model=&quot;ruleTime.index&quot;
                            ng-change=&quot;changeRuleTime(ruleTime)&quot;&gt;
                        &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                        &lt;option ng-repeat=&quot;ruleTime in ruleTimeOptions&quot; ng-value=&quot;$index&quot;&gt;{{ruleTime.value}}&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;   ng-show=&quot;isRuleSpaceShow&quot; &gt;
                    &lt;div class=&quot;bolder &quot;&gt;空间定位规则：&lt;/div&gt;
                    &lt;select class=&quot;form-control&quot; id=&quot;ruleSpace&quot; data-ng-model=&quot;ruleSpace.index&quot;
                            ng-change=&quot;changeRuleSpace(ruleSpace)&quot;&gt;
                        &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                        &lt;option ng-repeat=&quot;ruleSpace in ruleSpaceOptions&quot; ng-value=&quot;$index&quot;&gt;{{ruleSpace.value}}&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;

                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;拣货储位过滤规则：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;pickLocDataFilter&quot; data-ng-model=&quot;pickLocDataFilter.index&quot;
                                ng-change=&quot;changePickLocDataFilter(pickLocDataFilter)&quot;&gt;
                            &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                            &lt;option ng-repeat=&quot;pickLocDataFilter in pickLocDataFilterOptions&quot; ng-value=&quot;$index&quot;&gt;{{pickLocDataFilter.dataFilterDesc}}&lt;/option&gt;
                     &lt;/select&gt;
                &lt;/div&gt;

                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;补货储位过滤规则：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;repLocDataFilter&quot; data-ng-model=&quot;repLocDataFilter.index&quot;
                                ng-change=&quot;changeRepLocDataFilter(repLocDataFilter)&quot;&gt;
                            &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                            &lt;option ng-repeat=&quot;repLocDataFilter in repLocDataFilterOptions&quot; ng-value=&quot;$index&quot;&gt;{{repLocDataFilter.dataFilterDesc}}&lt;/option&gt;
                     &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;是否补货：&lt;/div&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;div class=&quot;radio&quot;&gt;
                            &lt;label&gt;
                                &lt;input type=&quot;radio&quot; name=&quot;isRep&quot; value=&quot;1&quot; ng-model=&quot;isRep&quot;&gt;
                                是
                            &lt;/label&gt;
                        &lt;/div&gt;
                        &lt;div class=&quot;radio&quot;&gt;
                            &lt;label&gt;
                                &lt;input type=&quot;radio&quot; name=&quot;isRep&quot; value=&quot;0&quot; ng-model=&quot;isRep&quot;&gt;
                                否
                            &lt;/label&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
            &lt;!-- Row 2 --&gt;
            &lt;div class=&quot;form-inline col-md-12 pull-right&quot;&gt;
                &lt;div class=&quot;control-group pull-right&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;保存&quot; class=&quot;btn btn-success&quot; ng-click=&quot;saveAllocateDetail()&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;


        &lt;/div&gt;
    &lt;/div&gt; &lt;/div&gt;   

</code></pre>

<h2 id="allocation-strategy-detail-edithtml"><a name="user-content-allocation-strategy-detail-edithtml" href="#allocation-strategy-detail-edithtml" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-detail-edit.html</h2>
<pre><code>/wms-web/src/main/webapp/views/strategy/allocation-strategy-detail-edit.html

&lt;div class=&quot;&quot;&gt;
    &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;close&quot; ng-click=&quot;close()&quot;&gt;×&lt;/button&gt;
            &lt;h4 class=&quot;modal-title&quot;&gt;编辑分配策略明细&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot; style=&quot;height: 200px;&quot;&gt;
            &lt;!-- Row 1 --&gt;
            &lt;div class=&quot;form-inline col-md-12&quot;&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;出库类型：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;orderType&quot; ng-model=&quot;orderType&quot; ng-options=&quot;item.key as item.value for item in orderTypeOptions&quot;
                                        ng-change=&quot;changeOrderType(orderType)&quot;&gt;
                         &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                     &lt;/select&gt;
                   &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;定位规则：&lt;/div&gt;
                    &lt;select class=&quot;form-control&quot; id=&quot;rule&quot; ng-model=&quot;rule&quot; ng-options=&quot;item.key as item.value for item in ruleOptions&quot;
                            ng-change=&quot;changeRule()&quot;&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot; ng-show=&quot;isRuleTimeShow&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;时间定位规则：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;ruleTime&quot; ng-model=&quot;allocRuleTime&quot; ng-options=&quot;item.key as item.value for item in ruleTimeOptions&quot;
                            ng-change=&quot;changeRuleTime(ruleTime)&quot;&gt;
                        &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;  ng-show=&quot;isRuleSpaceShow&quot; &gt;
                    &lt;div class=&quot;bolder &quot;&gt;空间定位规则：&lt;/div&gt;
                    &lt;select class=&quot;form-control&quot; id=&quot;ruleSpace&quot; ng-model=&quot;allocRuleSpace&quot; ng-options=&quot;item.key as item.value for item in ruleSpaceOptions&quot;
                            ng-change=&quot;changeRuleSpace(ruleSpace)&quot;&gt;
                        &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;拣货储位过滤规则：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;pickLocDataFilter&quot; ng-model=&quot;pickLocDataFilterSysNo&quot; ng-options=&quot;item.sysNo as item.dataFilterDesc for item in pickLocDataFilterOptions&quot;
                     ng-change=&quot;changePickLocDataFilter(pickLocDataFilter)&quot;&gt;
                            &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                     &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;补货储位过滤规则：&lt;/div&gt;
                     &lt;select class=&quot;form-control&quot; id=&quot;repLocDataFilter&quot; ng-model=&quot;repLocDataFilterSysNo&quot; ng-options=&quot;item.sysNo as item.dataFilterDesc for item in repLocDataFilterOptions&quot;
                     ng-change=&quot;changeRepLocDataFilter(repLocDataFilter)&quot;&gt;
                            &lt;option value=&quot;&quot;&gt;--请选择--&lt;/option&gt;
                     &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;是否补货：&lt;/div&gt;
                    &lt;div class=&quot;form-group&quot;&gt;
                        &lt;div class=&quot;radio&quot;&gt;
                            &lt;label&gt;
                                &lt;input type=&quot;radio&quot; name=&quot;isRep&quot; value=&quot;1&quot; ng-model=&quot;isRep&quot;&gt;
                                是
                            &lt;/label&gt;
                        &lt;/div&gt;
                        &lt;div class=&quot;radio&quot;&gt;
                            &lt;label&gt;
                                &lt;input type=&quot;radio&quot; name=&quot;isRep&quot; value=&quot;0&quot; ng-model=&quot;isRep&quot;&gt;
                                否
                            &lt;/label&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
            &lt;!-- Row 2 --&gt;
            &lt;div class=&quot;form-inline col-md-12 pull-right&quot;&gt;
                &lt;div class=&quot;control-group pull-right&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;保存&quot; class=&quot;btn btn-success&quot; ng-click=&quot;saveAllocateDetail()&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;


        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<h2 id="allocation-strategy-edithtml"><a name="user-content-allocation-strategy-edithtml" href="#allocation-strategy-edithtml" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>allocation-strategy-edit.html</h2>
<pre><code>/wms-web/src/main/webapp/views/strategy/allocation-strategy-edit.html

&lt;div class=&quot;&quot;&gt;
    &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;close&quot; ng-click=&quot;close()&quot;&gt;×&lt;/button&gt;
            &lt;h4 class=&quot;modal-title&quot;&gt;修改分配策略&lt;/h4&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;!-- Row 1 --&gt;
            &lt;div class=&quot;form-inline col-md-12&quot;&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                     &lt;div class=&quot;bolder &quot;&gt;仓库：&lt;/div&gt;
                     &lt; select class=&quot;form-control&quot; id=&quot;whSysNo&quot; name=&quot;toWhSysNo&quot; ng-model=&quot;whNo&quot;   ng - options =&quot;s. whNo  as s.whName for s in toWhOptions&quot; ng- disabled =&quot; isDisabled &quot;&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;货主：&lt;/div&gt;
                    &lt;select class=&quot;form-control&quot; id=&quot;company&quot; ng-model=&quot;companySysNo&quot; ng-options=&quot;item.sysNo as item.companyName for item in companyOptions&quot;&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class=&quot;control-group col-md-4&quot;&gt;
                    &lt;div class=&quot;bolder &quot;&gt;描述：&lt;/div&gt;
                    &lt;input type=&quot;text&quot; class=&quot;form-control&quot; maxlength=&quot;32&quot; autocomplete=&quot;off&quot; ng-model=&quot;allocationStrategyDesc&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
            &lt;!-- Row 2 --&gt;
            &lt;div class=&quot;form-inline col-md-12 pull-right&quot;&gt;
                &lt;div class=&quot;control-group pull-right&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;保存&quot; class=&quot;btn btn-success&quot; ng-click=&quot;updateAllocate()&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
            &lt;!-- Row 3 --&gt;
            &lt;div class=&quot;form-inline col-md-12 pull-right&quot;&gt;
                &lt;div class=&quot;control-group pull-right&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;新增&quot; class=&quot;btn btn-primary&quot; ng-click=&quot;addAllocateStrategyDetail()&quot;&gt;
                    &lt;input type=&quot;button&quot; value=&quot;编辑&quot; class=&quot;btn btn-warning&quot; id=&quot;editBtn&quot; ng-click=&quot;editAllocateStrategyDetail()&quot;&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;form-inline col-md-12&quot;&gt;
                &lt;table datatable=&quot;ng&quot; dt-options=&quot;dtOptions&quot;
                       dt-columns=&quot;dtColumnDefs&quot; class=&quot;table table-bordered table-hover&quot;&gt;
                    &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th width=&quot;5%&quot;&gt;&lt;/th&gt;
                        &lt;th&gt;行号&lt;/th&gt;
                        &lt;th&gt;出库类型&lt;/th&gt;
                        &lt;th&gt;时间分配规则&lt;/th&gt;
                        &lt;th&gt;空间分配规则&lt;/th&gt;
                        &lt;th&gt;分配规则优先级&lt;/th&gt;
                        &lt;th&gt;拣货储位过滤规则内部主键&lt;/th&gt;
                        &lt;th&gt;拣货储位过滤规则编码&lt;/th&gt;
                        &lt;th&gt;拣货储位过滤规则描述&lt;/th&gt;
                        &lt;th&gt;补货储位过滤规则内部主键&lt;/th&gt;
                        &lt;th&gt;补货储位过滤规则编码&lt;/th&gt;
                        &lt;th&gt;补货储位过滤规则描述&lt;/th&gt;
                    &lt;/tr&gt;
                    &lt;/thead&gt;
                    &lt;tbody&gt;
                    &lt;tr ng-repeat=&quot;allocationStrategyDetail in allocationStrategyObj.list&quot;&gt;
                        &lt;td&gt;&lt;input ng-model=&quot;checkItem&quot; type=&quot;checkbox&quot; name=&quot;checkItem&quot; ng-change=&quot;checkItemfrom({{ allocationStrategyDetail.allocationDetailNo }})&quot;/&gt;&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocationDetailNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.orderTypeName }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocRuleTimeName }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocRuleSpaceName }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.allocRuleSeq }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.pickLocDataFilterSysNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.pickLocDataFilterNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.pickLocDataFilterDesc }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.repLocDataFilterSysNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.repLocDataFilterNo }}&lt;/td&gt;
                        &lt;td&gt;{{ allocationStrategyDetail.repLocDataFilterDesc }}&lt;/td&gt;
                    &lt;/tr&gt;

                    &lt;/tbody&gt;
                &lt;/table&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre></article></body></html>